{"ast":null,"code":"var _jsxFileName = \"/Users/shannoncoakley/Documents/GitHub/mp/src/components/sections/incentivesSection/SelectedIncentivesSection.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useMediaQuery } from \"react-responsive\";\nimport { Button, Checkbox, Col, Dropdown, Image, Menu, Row, Space } from \"antd\";\nimport { useGetPartnersAndIncentivesContext, useIncentivesContext } from \"../homeSection/contexts/IncentivesContext\";\nimport { ReactComponent as Filter } from \"../../../images/svgIcons/filter.svg\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport styles from \"./styles.module.sass\";\nimport { DownOutlined, StarFilled, StarOutlined } from \"@ant-design/icons\";\nimport SelectedIncentivesDrawer from \"./SelectedIncentivesDrawer\";\nimport { useParams } from \"react-router-dom\";\nimport { createDataInSalesForce, fetchDataFromSalesForce, updateDataInSalesForce } from \"../../../salesforceAuth\";\nimport IncentiveCustomizationDrawer from \"./IncentiveCustomizationDrawer\";\nimport { getMemberInfoFromContact } from \"../../../getSalesForceData\";\nimport CharityDrawer from \"./CharityDrawer\";\nimport Link from \"antd/es/typography/Link\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NumberWithCommas = x => {\n  return x === null || x === void 0 ? void 0 : x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n};\n_c = NumberWithCommas;\nconst SelectedIncentivesSection = () => {\n  _s();\n  const [selectCartItemId, setSelectCartItemId] = useState(\"\");\n  const incentiveContext = useIncentivesContext();\n  const [openDrawer, setOpenDrawer] = useState(false);\n  const [openCustomizationDrawer, setOpenCustomizationDrawer] = useState(false);\n  const [openCharityDrawer, setOpenCharityDrawer] = useState(false);\n  const [selectedIncentive, setSelectedIncentive] = useState(null);\n  const {\n    incentiveFromSalesForce\n  } = useGetPartnersAndIncentivesContext();\n  const {\n    clientId\n  } = useParams();\n  const [currentPage, setCurrentPage] = useState(1);\n  const isMobile = useMediaQuery({\n    maxWidth: 610\n  });\n  const [data, setData] = useState([]);\n  const [activeCheckboxes, setActiveCheckboxes] = useState([\"All\"]);\n  const [sortBy, setSortBy] = useState(\"az\");\n  const [memberContactData, setMemberContactData] = useState([]);\n  const [contactData, setContactData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [sortedInfo, setSortedInfo] = useState({\n    columnKey: \"incentive\",\n    order: \"ascend\"\n  });\n  const cartItems = incentiveContext.cartItems;\n  let filteredData = [...incentiveFromSalesForce];\n  if (activeCheckboxes.length && !activeCheckboxes.includes(\"All\")) {\n    filteredData = filteredData.filter(item => activeCheckboxes.includes(item.Product_Type__c));\n  }\n  useEffect(() => {\n    let processedData = [...incentiveFromSalesForce];\n    processedData.sort((a, b) => a.incentive.localeCompare(b.incentive));\n    if (activeCheckboxes.length && !activeCheckboxes.includes(\"All\")) {\n      processedData = processedData.filter(item => activeCheckboxes.includes(item.Product_Type__c));\n    }\n    processedData = processedData.map(data => {\n      var _memberContactData$fi;\n      return {\n        ...data,\n        favorite: memberContactData === null || memberContactData === void 0 ? void 0 : (_memberContactData$fi = memberContactData.find(d => d.Incentive__c === data.key)) === null || _memberContactData$fi === void 0 ? void 0 : _memberContactData$fi.Favorite__c\n      };\n    });\n    if (sortedInfo.columnKey) {\n      processedData.sort((a, b) => {\n        if (sortBy === \"az\") {\n          // Incentive name\n          return a.incentive.localeCompare(b.incentive);\n        } else if (sortBy === \"za\") {\n          return b.incentive.localeCompare(a.incentive);\n        } else if (sortBy === \"lowToHigh\") {\n          return a.Points__c ? b.Points__c ? a.Points__c - b.Points__c : 1 : b.Points__c ? -1 : 0;\n        } else if (sortBy === \"highToLow\") {\n          return a.Points__c ? b.Points__c ? b.Points__c - a.Points__c : -1 : b.Points__c ? 1 : 0;\n        } else {\n          return new Date(b.CreatedDate || 0).getTime() - new Date(a.CreatedDate || 0).getTime();\n        }\n      });\n    }\n    const startIndex = (currentPage - 1) * 8;\n    const endIndex = startIndex + 8;\n    let paginatedData = processedData.slice(0, endIndex);\n    paginatedData = paginatedData.sort(sortByFavorite);\n    setData(paginatedData);\n  }, [sortBy, currentPage, incentiveFromSalesForce, activeCheckboxes, memberContactData, sortedInfo.columnKey]);\n  async function fetchData() {\n    try {\n      const salesForceData = await fetchDataFromSalesForce(`query/?q=SELECT+Incentive_Copy__c,Favorite__c,Incentive__c,Id+FROM+Member_Incentive__c+WHERE+Member_Contact__c='${clientId}'`);\n      setMemberContactData(salesForceData.records);\n      getMemberInfoFromContact(`${clientId}`).then(res => {\n        setContactData(res);\n      });\n      console.log(\"--- contactData (Member Info)\", contactData);\n    } catch (error) {\n      console.error(\"Failed to fetch data:\", error);\n    }\n  }\n\n  // Sorting function to prioritize 'favorite' status\n  const sortByFavorite = (a, b) => {\n    if (a.favorite === \"Active\" && b.favorite === \"Inactive\") {\n      return -1; // 'active' comes before 'inactive'\n    } else if (a.favorite === \"Inactive\" && b.favorite === \"Active\") {\n      return 1; // 'inactive' comes after 'active'\n    } else {\n      return 0; // no change in order\n    }\n  };\n\n  useEffect(() => {\n    void fetchData();\n  }, []);\n  const onCloseDrawer = () => {\n    setSelectedIncentive(null);\n    setOpenDrawer(false);\n  };\n  const onCloseCustomizationDrawer = async () => {\n    setOpenCustomizationDrawer(false);\n  };\n  const onSubmitCustomization = async customizationString => {\n    const updatedData = {\n      Customization__c: customizationString.toString()\n    };\n\n    // Find the index of the object in cartItems with the matching id\n    const index = cartItems.findIndex(item => item.cartItemId === selectCartItemId);\n\n    // If the object is found, update its Customization__c field\n    if (index !== -1) {\n      const updatedItem = {\n        ...cartItems[index],\n        ...updatedData\n      }; // Merge updatedData with existing item data\n      const updatedCartItems = [...cartItems]; // Create a copy of cartItems array\n      updatedCartItems[index] = updatedItem; // Replace the item at index with the updated one\n      console.log(\"--- updatedCartItems\", updatedCartItems);\n\n      // Update cartItems using incentiveContext.setCartItems\n      incentiveContext.setCartItems(updatedCartItems);\n    } else {\n      console.log(\"Item not found in cartItems.\");\n    }\n\n    // if (id) {\n    //   const result = await updateDataInSalesForce(\n    //     `/sobjects/Member_Incentive__c/${id}`,\n    //     updatedData\n    //   );\n    //   console.log(\"--- result\", result);\n    //   console.log(memberContactData);\n    // } else {\n    //   console.error(\"No matching ID found for the selected incentive.\");\n    // }\n    setOpenCustomizationDrawer(false);\n  };\n  const onCloseCharityDrawer = () => {\n    setOpenCharityDrawer(false);\n  };\n  const showDrawer = incentive => {\n    setSelectedIncentive(incentive);\n    setOpenDrawer(true);\n  };\n  const handleChangePage = page => {\n    setCurrentPage(page);\n  };\n  const onLoadMore = () => {\n    setCurrentPage(currentPage + 1);\n  };\n  const addFavorite = async e => {\n    setLoading(true);\n    if (memberContactData.find(m => m.Incentive__c === e.key)) {\n      var _memberContactData$fi2;\n      const id = (_memberContactData$fi2 = memberContactData.find(m => m.Incentive__c === e.key)) === null || _memberContactData$fi2 === void 0 ? void 0 : _memberContactData$fi2.Id;\n      const updatedData = {\n        Favorite__c: \"Active\"\n      };\n      await updateDataInSalesForce(`/sobjects/Member_Incentive__c/${id}`, updatedData);\n      fetchData();\n      setLoading(false);\n    } else {\n      const newData = {\n        Member_Contact__c: clientId,\n        Favorite__c: \"Active\",\n        Incentive__c: e.key\n      };\n      await createDataInSalesForce(`/sobjects/Member_Incentive__c/`, newData);\n      fetchData();\n      setLoading(false);\n    }\n  };\n  const cancelFavorite = async e => {\n    try {\n      var _memberContactData$fi3;\n      const id = (_memberContactData$fi3 = memberContactData.find(m => m.Incentive__c === e.key)) === null || _memberContactData$fi3 === void 0 ? void 0 : _memberContactData$fi3.Id;\n      if (id) {\n        setLoading(true);\n        const updatedData = {\n          Favorite__c: \"Inactive\"\n        };\n        await updateDataInSalesForce(`/sobjects/Member_Incentive__c/${id}`, updatedData);\n        fetchData();\n        setLoading(false);\n      }\n    } catch (error) {\n      setLoading(false);\n    }\n  };\n  const columns = [{\n    title: \"Incentive Name\",\n    dataIndex: \"incentive\",\n    key: \"incentive\"\n  }, {\n    title: \"Website\",\n    key: \"Website__c\",\n    render: value => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: \"300px\"\n      },\n      children: value.Website__c\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: \"Points\",\n    dataIndex: \"Points__c\",\n    key: \"Points__c\"\n  }, {\n    title: \"Favorite\",\n    key: \"favorite\",\n    render: value => {\n      // console.log('-- value', value, row)\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: (value === null || value === void 0 ? void 0 : value.favorite) === \"Active\" ? /*#__PURE__*/_jsxDEV(StarFilled, {\n          onClick: () => cancelFavorite(value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(StarOutlined, {\n          onClick: () => addFavorite(value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 15\n        }, this)\n      }, void 0, false);\n    }\n  }, {\n    title: \"Add to Cart\",\n    key: \"Points__c\",\n    render: value => {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        onClick: e => {\n          e.stopPropagation();\n          setSelectedIncentive(value);\n          onAddToCart(value);\n        },\n        children: \"Add to Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }, this);\n    }\n  }];\n  const onAddToCart = value => {\n    console.log(\"---- cartitems: \", cartItems);\n    console.log(\"--- value\", value);\n\n    // Make changes to the item's properties\n    if (value.Customization_Options__c) {\n      setOpenCustomizationDrawer(true);\n    }\n    if (value.Product_Type__c === \"Charitable\") {\n      setOpenCharityDrawer(true);\n    }\n\n    // Generate a UUID for the cart item ID\n    const cartItemId = uuidv4();\n    setSelectCartItemId(cartItemId);\n    // Create a new object with the updated key and additional property incentiveId\n    const {\n      key,\n      ...rest\n    } = value; // Destructure value, leaving out the key\n    const newValue = {\n      incentiveId: key,\n      key: cartItemId,\n      cartItemId,\n      ...rest\n    }; // Create new object with incentiveId, cartItemId, and remaining properties\n\n    // Add the item to the cart\n    incentiveContext.setCartItems([...cartItems, newValue]);\n  };\n  const getCartCount = value => {\n    const filteredCartItems = cartItems.filter(item => item.incentiveId == value.key);\n    return filteredCartItems.length;\n  };\n  const removeCartItem = item => {\n    const filteredCartItems = cartItems.filter(c => c.incentiveId == item.key);\n    filteredCartItems.pop();\n    const deleted = cartItems.filter(c => c.incentiveId !== item.key);\n    incentiveContext.setCartItems([...deleted, ...filteredCartItems]);\n    return filteredCartItems.length;\n  };\n  const menuValues = Array.from(new Set(incentiveFromSalesForce.map(item => item.Product_Type__c))).sort((a, b) => a === null || a === void 0 ? void 0 : a.localeCompare(b));\n  const menuItems = [\"All\", ...menuValues];\n  const menu = /*#__PURE__*/_jsxDEV(Menu, {\n    style: {\n      maxHeight: \"250px\",\n      overflowY: \"auto\"\n    },\n    children: menuItems.map((item, index) => /*#__PURE__*/_jsxDEV(Menu.Item, {\n      children: /*#__PURE__*/_jsxDEV(Checkbox, {\n        checked: activeCheckboxes.includes(item),\n        onClick: e => handleFilterChange(e, item),\n        children: item\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 11\n      }, this)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 396,\n    columnNumber: 5\n  }, this);\n  const handleFilterChange = (event, category) => {\n    event.stopPropagation(); // Останавливаем распространение события\n\n    let updatedCheckboxes = [...activeCheckboxes];\n    if (category === \"All\") {\n      updatedCheckboxes = [\"All\"];\n    } else {\n      if (updatedCheckboxes.includes(\"All\")) {\n        updatedCheckboxes = [];\n      }\n      if (updatedCheckboxes.includes(category)) {\n        updatedCheckboxes = updatedCheckboxes.filter(item => item !== category);\n      } else {\n        updatedCheckboxes.push(category);\n      }\n    }\n    setActiveCheckboxes(updatedCheckboxes);\n  };\n  const handleMenuClick = e => {\n    // message.info('Click on menu item.');\n    console.log(\"click\", e);\n    setSortBy(e.key);\n  };\n  const items = [{\n    label: \"Sort A-Z\",\n    key: \"az\"\n  }, {\n    label: \"Sort Z-A\",\n    key: \"za\"\n  }, {\n    label: \"Points Low to High\",\n    key: \"lowToHigh\"\n  }, {\n    label: \"Points High to Low\",\n    key: \"highToLow\"\n  }, {\n    label: \"Newest First\",\n    key: \"newestFirst\"\n  }];\n  const menuProps = {\n    items,\n    onClick: handleMenuClick\n  };\n  console.log(\"--- data: \", data);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: styles.incentivesTableContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.incentivesTableHeaderContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.incentivesTitleContainer,\n          children: [/*#__PURE__*/_jsxDEV(Dropdown, {\n            menu: menuProps,\n            trigger: [\"click\"],\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              className: styles.sortBtn,\n              children: /*#__PURE__*/_jsxDEV(Space, {\n                children: [\"Sort by\", /*#__PURE__*/_jsxDEV(DownOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n            overlay: menu,\n            trigger: [\"click\"],\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.filterBtn,\n              children: [/*#__PURE__*/_jsxDEV(Filter, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 17\n              }, this), \" Filter\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.pointsBalanceContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.pointsBalanceLabel,\n              children: \"Points Balance:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 15\n            }, this), \" \", NumberWithCommas(contactData === null || contactData === void 0 ? void 0 : contactData.Points_Balance__c)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            target: \"_blank\",\n            href: \"https://form.jotform.com/240324768989170\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.suggestIncentiveText,\n              children: \"Suggest an Incentive\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        gutter: [32, 32],\n        className: styles.incentivesItemsContainer,\n        children: data.map(item => /*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          sm: 12,\n          xs: 12,\n          className: styles.incentivesItemContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: \"relative\",\n              width: \"100%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Image, {\n              width: \"100%\",\n              src: item.Image__c || \"https://via.placeholder.com/200\",\n              alt: \"Your Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 17\n            }, this), (item === null || item === void 0 ? void 0 : item.favorite) === \"Active\" ? /*#__PURE__*/_jsxDEV(StarFilled, {\n              className: styles.favoriteBtn,\n              onClick: () => cancelFavorite(item)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(StarOutlined, {\n              className: styles.favoriteBtn,\n              onClick: () => addFavorite(item)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 524,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 15\n          }, this), !getCartCount(item) && /*#__PURE__*/_jsxDEV(Button, {\n            className: styles.addToCartBtn,\n            onClick: e => {\n              e.stopPropagation();\n              setSelectedIncentive(item);\n              onAddToCart(item);\n            },\n            children: \"+ Add\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 17\n          }, this), getCartCount(item) > 0 && /*#__PURE__*/_jsxDEV(Button, {\n            className: styles.addToCartBtn,\n            onClick: e => {\n              e.stopPropagation();\n              setSelectedIncentive(item);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: () => removeCartItem(item),\n              className: styles.cartItemActionBtn,\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 19\n            }, this), getCartCount(item), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.cartItemActionBtn,\n              onClick: () => onAddToCart(item),\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.incentivesItemInfoContainer,\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              target: \"_blank\",\n              href: item.Website__c,\n              className: styles.incentivesItemWebsiteText,\n              children: item.incentive\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.incentivesItemPointsText,\n              children: [item.Points__c, \" points\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: styles.divider\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 15\n          }, this)]\n        }, item.key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.loadMoreContainer,\n        onClick: () => onLoadMore(),\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          children: \"Load More\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SelectedIncentivesDrawer, {\n        selectedIncentivesDetails: selectedIncentive,\n        isOpen: openDrawer,\n        onClose: onCloseDrawer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IncentiveCustomizationDrawer, {\n        isOpen: openCustomizationDrawer,\n        onClose: onCloseCustomizationDrawer,\n        onSubmit: onSubmitCustomization\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CharityDrawer, {\n        isOpen: openCharityDrawer,\n        onClose: onCloseCharityDrawer,\n        contactInfo: contactData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(SelectedIncentivesSection, \"a5qYBbzvG71UBW83ssIcfv02+hg=\", false, function () {\n  return [useIncentivesContext, useGetPartnersAndIncentivesContext, useParams, useMediaQuery];\n});\n_c2 = SelectedIncentivesSection;\nexport default SelectedIncentivesSection;\nvar _c, _c2;\n$RefreshReg$(_c, \"NumberWithCommas\");\n$RefreshReg$(_c2, \"SelectedIncentivesSection\");","map":{"version":3,"names":["React","useEffect","useState","useMediaQuery","Button","Checkbox","Col","Dropdown","Image","Menu","Row","Space","useGetPartnersAndIncentivesContext","useIncentivesContext","ReactComponent","Filter","v4","uuidv4","styles","DownOutlined","StarFilled","StarOutlined","SelectedIncentivesDrawer","useParams","createDataInSalesForce","fetchDataFromSalesForce","updateDataInSalesForce","IncentiveCustomizationDrawer","getMemberInfoFromContact","CharityDrawer","Link","jsxDEV","_jsxDEV","Fragment","_Fragment","NumberWithCommas","x","toString","replace","_c","SelectedIncentivesSection","_s","selectCartItemId","setSelectCartItemId","incentiveContext","openDrawer","setOpenDrawer","openCustomizationDrawer","setOpenCustomizationDrawer","openCharityDrawer","setOpenCharityDrawer","selectedIncentive","setSelectedIncentive","incentiveFromSalesForce","clientId","currentPage","setCurrentPage","isMobile","maxWidth","data","setData","activeCheckboxes","setActiveCheckboxes","sortBy","setSortBy","memberContactData","setMemberContactData","contactData","setContactData","loading","setLoading","sortedInfo","setSortedInfo","columnKey","order","cartItems","filteredData","length","includes","filter","item","Product_Type__c","processedData","sort","a","b","incentive","localeCompare","map","_memberContactData$fi","favorite","find","d","Incentive__c","key","Favorite__c","Points__c","Date","CreatedDate","getTime","startIndex","endIndex","paginatedData","slice","sortByFavorite","fetchData","salesForceData","records","then","res","console","log","error","onCloseDrawer","onCloseCustomizationDrawer","onSubmitCustomization","customizationString","updatedData","Customization__c","index","findIndex","cartItemId","updatedItem","updatedCartItems","setCartItems","onCloseCharityDrawer","showDrawer","handleChangePage","page","onLoadMore","addFavorite","e","m","_memberContactData$fi2","id","Id","newData","Member_Contact__c","cancelFavorite","_memberContactData$fi3","columns","title","dataIndex","render","value","style","children","Website__c","fileName","_jsxFileName","lineNumber","columnNumber","onClick","stopPropagation","onAddToCart","Customization_Options__c","rest","newValue","incentiveId","getCartCount","filteredCartItems","removeCartItem","c","pop","deleted","menuValues","Array","from","Set","menuItems","menu","maxHeight","overflowY","Item","checked","handleFilterChange","event","category","updatedCheckboxes","push","handleMenuClick","items","label","menuProps","className","incentivesTableContainer","incentivesTableHeaderContainer","incentivesTitleContainer","trigger","sortBtn","overlay","filterBtn","pointsBalanceContainer","pointsBalanceLabel","Points_Balance__c","target","href","suggestIncentiveText","gutter","incentivesItemsContainer","md","sm","xs","incentivesItemContainer","position","width","src","Image__c","alt","favoriteBtn","addToCartBtn","cartItemActionBtn","incentivesItemInfoContainer","incentivesItemWebsiteText","incentivesItemPointsText","divider","loadMoreContainer","selectedIncentivesDetails","isOpen","onClose","onSubmit","contactInfo","_c2","$RefreshReg$"],"sources":["/Users/shannoncoakley/Documents/GitHub/mp/src/components/sections/incentivesSection/SelectedIncentivesSection.tsx"],"sourcesContent":["import React, { FC, useEffect, useState } from \"react\";\nimport { useMediaQuery } from \"react-responsive\";\nimport {\n  Button,\n  Checkbox,\n  Col,\n  Dropdown,\n  Image,\n  List,\n  Menu,\n  MenuProps,\n  Pagination,\n  Row,\n  Space,\n  Table,\n  Tag,\n} from \"antd\";\nimport type { ColumnsType, SorterResult } from \"antd/es/table/interface\";\nimport {\n  GetIncentiveDataType,\n  useGetPartnersAndIncentivesContext,\n  useIncentivesContext,\n  usePartnerContext,\n} from \"../homeSection/contexts/IncentivesContext\";\nimport { ReactComponent as Filter } from \"../../../images/svgIcons/filter.svg\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport styles from \"./styles.module.sass\";\nimport { DownOutlined, StarFilled, StarOutlined } from \"@ant-design/icons\";\nimport SelectedIncentivesDrawer from \"./SelectedIncentivesDrawer\";\nimport { useParams } from \"react-router-dom\";\nimport {\n  createDataInSalesForce,\n  fetchDataFromSalesForce,\n  updateDataInSalesForce,\n} from \"../../../salesforceAuth\";\nimport IncentiveCustomizationDrawer from \"./IncentiveCustomizationDrawer\";\nimport { getMemberInfoFromContact } from \"../../../getSalesForceData\";\nimport CharityDrawer from \"./CharityDrawer\";\nimport Link from \"antd/es/typography/Link\";\n\nexport interface SelectedIncentivesDataType {\n  key: string;\n  incentive: string;\n  moreInfo: string | JSX.Element;\n  meetingsRequired: number;\n  requirementsFulfilled?: string | JSX.Element;\n  status?: string | JSX.Element;\n  Meetings_Needed__c?: string;\n  Meetings_Completed__c?: string;\n  Customization__c?: string;\n  Points__c?: number;\n  Website__c?: string;\n  Image__c?: string;\n  favorite?: string;\n  cartItemId?: string;\n  Needs_to_be_shipped__c?: boolean;\n  incentiveId?: string;\n}\n\nconst NumberWithCommas = (x: number) => {\n  return x?.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n};\n\nconst SelectedIncentivesSection: FC = () => {\n  const [selectCartItemId, setSelectCartItemId] = useState<string>(\"\");\n  const incentiveContext = useIncentivesContext();\n  const [openDrawer, setOpenDrawer] = useState(false);\n  const [openCustomizationDrawer, setOpenCustomizationDrawer] = useState(false);\n  const [openCharityDrawer, setOpenCharityDrawer] = useState(false);\n  const [selectedIncentive, setSelectedIncentive] =\n    useState<SelectedIncentivesDataType | null>(null);\n  const { incentiveFromSalesForce } = useGetPartnersAndIncentivesContext();\n  const { clientId } = useParams<{ clientId: string }>();\n  const [currentPage, setCurrentPage] = useState(1);\n  const isMobile = useMediaQuery({ maxWidth: 610 });\n  const [data, setData] = useState<SelectedIncentivesDataType[]>([]);\n  const [activeCheckboxes, setActiveCheckboxes] = useState<string[]>([\"All\"]);\n  const [sortBy, setSortBy] = useState(\"az\");\n  const [memberContactData, setMemberContactData] = useState<any[]>([]);\n  const [contactData, setContactData] = useState<any>([]);\n  const [loading, setLoading] = useState(false);\n  const [sortedInfo, setSortedInfo] = useState<\n    SorterResult<GetIncentiveDataType>\n  >({\n    columnKey: \"incentive\",\n    order: \"ascend\",\n  });\n  const cartItems = incentiveContext.cartItems;\n\n  let filteredData = [...incentiveFromSalesForce];\n\n  if (activeCheckboxes.length && !activeCheckboxes.includes(\"All\")) {\n    filteredData = filteredData.filter((item) =>\n      activeCheckboxes.includes(item.Product_Type__c)\n    );\n  }\n\n  useEffect(() => {\n    let processedData = [...incentiveFromSalesForce];\n\n    processedData.sort((a, b) => a.incentive.localeCompare(b.incentive));\n\n    if (activeCheckboxes.length && !activeCheckboxes.includes(\"All\")) {\n      processedData = processedData.filter((item) =>\n        activeCheckboxes.includes(item.Product_Type__c)\n      );\n    }\n\n    processedData = processedData.map((data) => ({\n      ...data,\n      favorite: memberContactData?.find((d) => d.Incentive__c === data.key)\n        ?.Favorite__c,\n    }));\n\n    if (sortedInfo.columnKey) {\n      processedData.sort((a, b) => {\n        if (sortBy === \"az\") {\n          // Incentive name\n          return a.incentive.localeCompare(b.incentive);\n        } else if (sortBy === \"za\") {\n          return b.incentive.localeCompare(a.incentive);\n        } else if (sortBy === \"lowToHigh\") {\n          return a.Points__c\n            ? b.Points__c\n              ? a.Points__c - b.Points__c\n              : 1\n            : b.Points__c\n            ? -1\n            : 0;\n        } else if (sortBy === \"highToLow\") {\n          return a.Points__c\n            ? b.Points__c\n              ? b.Points__c - a.Points__c\n              : -1\n            : b.Points__c\n            ? 1\n            : 0;\n        } else {\n          return (\n            new Date(b.CreatedDate || 0).getTime() -\n            new Date(a.CreatedDate || 0).getTime()\n          );\n        }\n      });\n    }\n\n    const startIndex = (currentPage - 1) * 8;\n    const endIndex = startIndex + 8;\n    let paginatedData = processedData.slice(0, endIndex);\n    paginatedData = paginatedData.sort(sortByFavorite);\n    setData(paginatedData);\n  }, [\n    sortBy,\n    currentPage,\n    incentiveFromSalesForce,\n    activeCheckboxes,\n    memberContactData,\n    sortedInfo.columnKey,\n  ]);\n\n  async function fetchData() {\n    try {\n      const salesForceData = await fetchDataFromSalesForce(\n        `query/?q=SELECT+Incentive_Copy__c,Favorite__c,Incentive__c,Id+FROM+Member_Incentive__c+WHERE+Member_Contact__c='${clientId}'`\n      );\n      setMemberContactData(salesForceData.records);\n      getMemberInfoFromContact(`${clientId}`).then((res) => {\n        setContactData(res);\n      });\n      console.log(\"--- contactData (Member Info)\", contactData);\n    } catch (error) {\n      console.error(\"Failed to fetch data:\", error);\n    }\n  }\n\n  // Sorting function to prioritize 'favorite' status\n  const sortByFavorite = (a: any, b: any) => {\n    if (a.favorite === \"Active\" && b.favorite === \"Inactive\") {\n      return -1; // 'active' comes before 'inactive'\n    } else if (a.favorite === \"Inactive\" && b.favorite === \"Active\") {\n      return 1; // 'inactive' comes after 'active'\n    } else {\n      return 0; // no change in order\n    }\n  };\n\n  useEffect(() => {\n    void fetchData();\n  }, []);\n\n  const onCloseDrawer = () => {\n    setSelectedIncentive(null);\n    setOpenDrawer(false);\n  };\n\n  const onCloseCustomizationDrawer = async () => {\n    setOpenCustomizationDrawer(false);\n  };\n\n  const onSubmitCustomization = async (customizationString: string) => {\n    const updatedData = {\n      Customization__c: customizationString.toString(),\n    };\n\n    // Find the index of the object in cartItems with the matching id\n    const index = cartItems.findIndex(\n      (item) => item.cartItemId === selectCartItemId\n    );\n\n    // If the object is found, update its Customization__c field\n    if (index !== -1) {\n      const updatedItem = { ...cartItems[index], ...updatedData }; // Merge updatedData with existing item data\n      const updatedCartItems = [...cartItems]; // Create a copy of cartItems array\n      updatedCartItems[index] = updatedItem; // Replace the item at index with the updated one\n      console.log(\"--- updatedCartItems\", updatedCartItems);\n\n      // Update cartItems using incentiveContext.setCartItems\n      incentiveContext.setCartItems(updatedCartItems);\n    } else {\n      console.log(\"Item not found in cartItems.\");\n    }\n\n    // if (id) {\n    //   const result = await updateDataInSalesForce(\n    //     `/sobjects/Member_Incentive__c/${id}`,\n    //     updatedData\n    //   );\n    //   console.log(\"--- result\", result);\n    //   console.log(memberContactData);\n    // } else {\n    //   console.error(\"No matching ID found for the selected incentive.\");\n    // }\n    setOpenCustomizationDrawer(false);\n  };\n\n  const onCloseCharityDrawer = () => {\n    setOpenCharityDrawer(false);\n  };\n\n  const showDrawer = (incentive: SelectedIncentivesDataType) => {\n    setSelectedIncentive(incentive);\n    setOpenDrawer(true);\n  };\n\n  const handleChangePage = (page: number) => {\n    setCurrentPage(page);\n  };\n\n  const onLoadMore = () => {\n    setCurrentPage(currentPage + 1);\n  };\n\n  const addFavorite = async (e: any) => {\n    setLoading(true);\n    if (memberContactData.find((m) => m.Incentive__c === e.key)) {\n      const id = memberContactData.find((m) => m.Incentive__c === e.key)?.Id;\n      const updatedData = {\n        Favorite__c: \"Active\",\n      };\n      await updateDataInSalesForce(\n        `/sobjects/Member_Incentive__c/${id}`,\n        updatedData\n      );\n      fetchData();\n      setLoading(false);\n    } else {\n      const newData = {\n        Member_Contact__c: clientId,\n        Favorite__c: \"Active\",\n        Incentive__c: e.key,\n      };\n      await createDataInSalesForce(`/sobjects/Member_Incentive__c/`, newData);\n      fetchData();\n      setLoading(false);\n    }\n  };\n\n  const cancelFavorite = async (e: any) => {\n    try {\n      const id = memberContactData.find((m) => m.Incentive__c === e.key)?.Id;\n      if (id) {\n        setLoading(true);\n        const updatedData = {\n          Favorite__c: \"Inactive\",\n        };\n        await updateDataInSalesForce(\n          `/sobjects/Member_Incentive__c/${id}`,\n          updatedData\n        );\n        fetchData();\n        setLoading(false);\n      }\n    } catch (error) {\n      setLoading(false);\n    }\n  };\n\n  const columns: ColumnsType<SelectedIncentivesDataType> = [\n    {\n      title: \"Incentive Name\",\n      dataIndex: \"incentive\",\n      key: \"incentive\",\n    },\n    {\n      title: \"Website\",\n      key: \"Website__c\",\n      render: (value) => (\n        <div style={{ maxWidth: \"300px\" }}>{value.Website__c}</div>\n      ),\n    },\n    {\n      title: \"Points\",\n      dataIndex: \"Points__c\",\n      key: \"Points__c\",\n    },\n    {\n      title: \"Favorite\",\n      key: \"favorite\",\n      render: (value) => {\n        // console.log('-- value', value, row)\n        return (\n          <>\n            {value?.favorite === \"Active\" ? (\n              <StarFilled onClick={() => cancelFavorite(value)} />\n            ) : (\n              <StarOutlined onClick={() => addFavorite(value)} />\n            )}\n          </>\n        );\n      },\n    },\n    {\n      title: \"Add to Cart\",\n      key: \"Points__c\",\n      render: (value) => {\n        return (\n          <Button\n            onClick={(e) => {\n              e.stopPropagation();\n              setSelectedIncentive(value);\n              onAddToCart(value);\n            }}\n          >\n            Add to Cart\n          </Button>\n        );\n      },\n    },\n  ];\n\n  const onAddToCart = (value: any) => {\n    console.log(\"---- cartitems: \", cartItems);\n    console.log(\"--- value\", value);\n\n    // Make changes to the item's properties\n    if (value.Customization_Options__c) {\n      setOpenCustomizationDrawer(true);\n    }\n    if (value.Product_Type__c === \"Charitable\") {\n      setOpenCharityDrawer(true);\n    }\n\n    // Generate a UUID for the cart item ID\n    const cartItemId = uuidv4();\n    setSelectCartItemId(cartItemId);\n    // Create a new object with the updated key and additional property incentiveId\n    const { key, ...rest } = value; // Destructure value, leaving out the key\n    const newValue = { incentiveId: key, key: cartItemId, cartItemId, ...rest }; // Create new object with incentiveId, cartItemId, and remaining properties\n\n    // Add the item to the cart\n    incentiveContext.setCartItems([...cartItems, newValue]);\n  };\n\n  const getCartCount = (value: any) => {\n    const filteredCartItems = cartItems.filter(\n      (item) => item.incentiveId == value.key\n    );\n    return filteredCartItems.length;\n  };\n\n  const removeCartItem = (item: any) => {\n    const filteredCartItems = cartItems.filter(\n      (c) => c.incentiveId == item.key\n    );\n    filteredCartItems.pop();\n    const deleted = cartItems.filter((c) => c.incentiveId !== item.key);\n    incentiveContext.setCartItems([...deleted, ...filteredCartItems]);\n    return filteredCartItems.length;\n  };\n\n  const menuValues = Array.from(\n    new Set(incentiveFromSalesForce.map((item) => item.Product_Type__c))\n  ).sort((a: any, b: any) => a?.localeCompare(b));\n  const menuItems = [\"All\", ...menuValues];\n  const menu = (\n    <Menu style={{ maxHeight: \"250px\", overflowY: \"auto\" }}>\n      {menuItems.map((item, index) => (\n        <Menu.Item key={index}>\n          <Checkbox\n            checked={activeCheckboxes.includes(item)}\n            onClick={(e) => handleFilterChange(e, item)}\n          >\n            {item}\n          </Checkbox>\n        </Menu.Item>\n      ))}\n    </Menu>\n  );\n\n  const handleFilterChange = (event: React.MouseEvent, category: string) => {\n    event.stopPropagation(); // Останавливаем распространение события\n\n    let updatedCheckboxes = [...activeCheckboxes];\n\n    if (category === \"All\") {\n      updatedCheckboxes = [\"All\"];\n    } else {\n      if (updatedCheckboxes.includes(\"All\")) {\n        updatedCheckboxes = [];\n      }\n      if (updatedCheckboxes.includes(category)) {\n        updatedCheckboxes = updatedCheckboxes.filter(\n          (item) => item !== category\n        );\n      } else {\n        updatedCheckboxes.push(category);\n      }\n    }\n\n    setActiveCheckboxes(updatedCheckboxes);\n  };\n\n  const handleMenuClick: MenuProps[\"onClick\"] = (e) => {\n    // message.info('Click on menu item.');\n    console.log(\"click\", e);\n    setSortBy(e.key);\n  };\n\n  const items: MenuProps[\"items\"] = [\n    {\n      label: \"Sort A-Z\",\n      key: \"az\",\n    },\n    {\n      label: \"Sort Z-A\",\n      key: \"za\",\n    },\n    {\n      label: \"Points Low to High\",\n      key: \"lowToHigh\",\n    },\n    {\n      label: \"Points High to Low\",\n      key: \"highToLow\",\n    },\n    {\n      label: \"Newest First\",\n      key: \"newestFirst\",\n    },\n  ];\n\n  const menuProps = {\n    items,\n    onClick: handleMenuClick,\n  };\n\n  console.log(\"--- data: \", data);\n\n  return (\n    <>\n      <section className={styles.incentivesTableContainer}>\n        <div className={styles.incentivesTableHeaderContainer}>\n          <div className={styles.incentivesTitleContainer}>\n            <Dropdown menu={menuProps} trigger={[\"click\"]}>\n              <Button className={styles.sortBtn}>\n                <Space>\n                  Sort by\n                  <DownOutlined />\n                </Space>\n              </Button>\n            </Dropdown>\n            <Dropdown overlay={menu} trigger={[\"click\"]}>\n              <button className={styles.filterBtn}>\n                <Filter /> Filter\n              </button>\n            </Dropdown>\n          </div>\n          <div className={styles.pointsBalanceContainer}>\n            <h3>\n              <span className={styles.pointsBalanceLabel}>Points Balance:</span>{\" \"}\n              {NumberWithCommas(contactData?.Points_Balance__c)}\n            </h3>\n            <Link\n              target=\"_blank\"\n              href=\"https://form.jotform.com/240324768989170\"\n            >\n              <p className={styles.suggestIncentiveText}>\n                Suggest an Incentive\n              </p>\n            </Link>\n          </div>\n        </div>\n        <Row gutter={[32, 32]} className={styles.incentivesItemsContainer}>\n          {data.map((item) => (\n            <Col\n              key={item.key}\n              md={6}\n              sm={12}\n              xs={12}\n              className={styles.incentivesItemContainer}\n            >\n              <div style={{ position: \"relative\", width: \"100%\" }}>\n                <Image\n                  width=\"100%\"\n                  src={item.Image__c || \"https://via.placeholder.com/200\"}\n                  alt=\"Your Image\"\n                />\n                {item?.favorite === \"Active\" ? (\n                  <StarFilled\n                    className={styles.favoriteBtn}\n                    onClick={() => cancelFavorite(item)}\n                  />\n                ) : (\n                  <StarOutlined\n                    className={styles.favoriteBtn}\n                    onClick={() => addFavorite(item)}\n                  />\n                )}\n              </div>\n              {!getCartCount(item) && (\n                <Button\n                  className={styles.addToCartBtn}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setSelectedIncentive(item);\n                    onAddToCart(item);\n                  }}\n                >\n                  + Add\n                </Button>\n              )}\n\n              {getCartCount(item) > 0 && (\n                <Button\n                  className={styles.addToCartBtn}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setSelectedIncentive(item);\n                  }}\n                >\n                  <span\n                    onClick={() => removeCartItem(item)}\n                    className={styles.cartItemActionBtn}\n                  >\n                    -\n                  </span>\n                  {getCartCount(item)}\n                  <span\n                    className={styles.cartItemActionBtn}\n                    onClick={() => onAddToCart(item)}\n                  >\n                    +\n                  </span>\n                </Button>\n              )}\n              <div className={styles.incentivesItemInfoContainer}>\n                <Link\n                  target=\"_blank\"\n                  href={item.Website__c}\n                  className={styles.incentivesItemWebsiteText}\n                >\n                  {item.incentive}\n                </Link>\n                <p className={styles.incentivesItemPointsText}>\n                  {item.Points__c} points\n                </p>\n              </div>\n              <hr className={styles.divider} />\n            </Col>\n          ))}\n        </Row>\n        <div className={styles.loadMoreContainer} onClick={() => onLoadMore()}>\n          <Button>Load More</Button>\n        </div>\n        <SelectedIncentivesDrawer\n          selectedIncentivesDetails={selectedIncentive}\n          isOpen={openDrawer}\n          onClose={onCloseDrawer}\n        />\n        <IncentiveCustomizationDrawer\n          isOpen={openCustomizationDrawer}\n          onClose={onCloseCustomizationDrawer}\n          onSubmit={onSubmitCustomization}\n        />\n        <CharityDrawer\n          isOpen={openCharityDrawer}\n          onClose={onCloseCharityDrawer}\n          contactInfo={contactData}\n        />\n      </section>\n    </>\n  );\n};\n\nexport default SelectedIncentivesSection;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}