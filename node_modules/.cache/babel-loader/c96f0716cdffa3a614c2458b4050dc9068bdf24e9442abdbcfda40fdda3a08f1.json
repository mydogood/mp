{"ast":null,"code":"var _jsxFileName = \"/Users/shannoncoakley/Documents/mp/src/components/sections/homeSection/PartnerDrawer.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useMediaQuery } from \"react-responsive\";\nimport { Drawer, Avatar, message } from \"antd\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport { CloseOutlined } from \"@ant-design/icons\";\nimport { marked } from \"marked\";\nimport RequestModal from \"./ui/RequestModal\";\nimport AcceptRequestModal from \"./ui/AcceptRequestModal\";\nimport styles from \"./styles.module.sass\";\nimport { usePartnerContext } from \"./contexts/IncentivesContext\";\nimport { createDataInSalesForce, fetchDataFromSalesForce, updateDataInSalesForce } from \"../../../salesforceAuth\";\nimport { getMemberInfoFromContact } from \"../../../getSalesForceData\";\nimport RequestTextModal from \"./ui/RequestTextModal\";\nimport NoDQModal from \"./ui/NoDQModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PartnerDrawer = ({\n  isOpen,\n  onClose,\n  partnerDetails\n}) => {\n  _s();\n  var _partnerDetails$filte;\n  const [isDeclineModalOpen, setIsDeclineModalOpen] = useState(false);\n  const [isAcceptModalOpen, setIsAcceptModalOpen] = useState(false);\n  const [isRequestModalOpen, setIsRequestModalOpen] = useState(false);\n  const [selectedCheckbox, setSelectedCheckbox] = useState(\"No interest\");\n  const [acceptMeetings, setAcceptMeetings] = useState(null);\n  const [isDQpartner, setIsDQpartner] = useState(null);\n  const [noDQModalState, setNoDQModalState] = useState(false);\n  const {\n    addAcceptedPartner,\n    addRequestedPartner,\n    addDeclinedPartner,\n    declinedList,\n    acceptedList,\n    requestedList,\n    removeAcceptedPartner,\n    removeDeclinePartner\n  } = usePartnerContext();\n  const [isAccepted, setIsAccepted] = useState(false);\n  const [isDeclined, setIsDeclined] = useState(false);\n  const [interestText, setInterestText] = useState(\"\");\n  const [interestTextAvailability, setInterestTextAvailability] = useState(\"\");\n  const [messageApi, contextHolder] = message.useMessage();\n  const {\n    clientId\n  } = useParams();\n  const isMobile = useMediaQuery({\n    maxWidth: 610\n  });\n  const isTablet = useMediaQuery({\n    maxWidth: 1024\n  });\n  const isPartnerAccepted = acceptedList.some(item => item.key === (partnerDetails === null || partnerDetails === void 0 ? void 0 : partnerDetails.key));\n  const isPartnerRequested = requestedList.some(item => item.key === (partnerDetails === null || partnerDetails === void 0 ? void 0 : partnerDetails.key));\n  const isPartnerDeclined = declinedList.some(item => item.key === (partnerDetails === null || partnerDetails === void 0 ? void 0 : partnerDetails.key));\n  const showAcceptAnswerModal = async () => {\n    try {\n      if (partnerDetails) {\n        const salesForceData = await fetchDataFromSalesForce(`query/?q=SELECT+Id,Client_Name__c,Stage_MP__c,DQ_Partner__c,DQ_Question__c+FROM+Meeting__c+WHERE+DQ_Partner__c=true+AND+MemberC__c='${clientId}'+AND+(Client_Id__c='${partnerDetails.clientKey}'+OR+Client_Id__c='${partnerDetails.key}')`);\n        if (salesForceData && salesForceData.records && salesForceData.records[0] && salesForceData.records[0].DQ_Question__c) {\n          setAcceptMeetings(prev => ({\n            ...prev,\n            question: salesForceData.records[0].DQ_Question__c\n          }));\n        } else {\n          console.error(\"Invalid data format:\", salesForceData);\n        }\n      }\n      if (partnerDetails) {\n        const DQPartnerData = await fetchDataFromSalesForce(`query/?q=SELECT+DQ_Partner__c+FROM+Meeting__c+WHERE+MemberC__c='${clientId}'+AND+(Client_Id__c='${partnerDetails.clientKey}'+OR+Client_Id__c='${partnerDetails.key}')`);\n        if (DQPartnerData && DQPartnerData.records && DQPartnerData.records[0] && DQPartnerData.records[0].DQ_Partner__c) {\n          setIsDQpartner(prev => ({\n            ...prev,\n            partner: DQPartnerData.records[0].DQ_Partner__c\n          }));\n          setIsAcceptModalOpen(true);\n        } else {\n          console.log(\"no DQ Modal\");\n          showNoDQModal();\n        }\n      }\n    } catch (error) {\n      console.error(\"Error fetching partner details:\", error);\n    } finally {\n      // setLoadingPartnerDetails(false);\n    }\n  };\n  useEffect(() => {\n    if (partnerDetails) {\n      setIsAccepted(acceptedList.some(item => item.key === partnerDetails.key));\n      setIsDeclined(declinedList.some(item => item.key === partnerDetails.key));\n    }\n  }, [partnerDetails, acceptedList, declinedList]);\n  const success = () => {\n    messageApi.open({\n      type: \"success\",\n      content: \"Data sent successfully\"\n    });\n  };\n  const handleAcceptClick = () => {\n    showAcceptAnswerModal();\n  };\n  const showRequestModal = () => {\n    setIsRequestModalOpen(true);\n  };\n  const handleCheckboxSelect = checkboxValue => {\n    setSelectedCheckbox(checkboxValue);\n  };\n  const handleRequestClick = () => {\n    if (partnerDetails) {\n      if (selectedCheckbox === \"Yes\") {\n        const partnerWithInterest = {\n          ...partnerDetails,\n          DQ_Response__c: selectedCheckbox,\n          Available_Dates_Times__c: interestTextAvailability\n        };\n        console.log({\n          partnerWithInterest\n        });\n        updatePartnerInSalesForce(partnerWithInterest, \"Accepted\");\n        onClose();\n        setInterestTextAvailability(\"\");\n        setIsAcceptModalOpen(false);\n      } else if (selectedCheckbox === \"No\") {\n        const partnerWithInterest = {\n          ...partnerDetails,\n          DQ_Response__c: selectedCheckbox\n        };\n        console.log({\n          partnerWithInterest\n        });\n        updatePartnerInSalesForce(partnerWithInterest, \"Client-Declined\");\n        onClose();\n        setInterestTextAvailability(\"\");\n        setIsAcceptModalOpen(false);\n      }\n    }\n  };\n  const handleRequestTextClick = () => {\n    if (partnerDetails) {\n      const partnerWithInterest = {\n        ...partnerDetails,\n        Interest_in_Partner__c: interestText\n      };\n      updatePartnerInSalesForce(partnerWithInterest, \"Requested\");\n      onClose();\n      setInterestTextAvailability(\"\");\n      setIsAcceptModalOpen(false);\n    }\n  };\n  const handleNoDQClick = () => {\n    if (partnerDetails) {\n      const partnerWithInterest = {\n        ...partnerDetails,\n        Available_Dates_Times__c: interestTextAvailability\n      };\n      updatePartnerInSalesForce(partnerWithInterest, \"Accepted\");\n      onClose();\n      setInterestTextAvailability(\"\");\n      setIsAcceptModalOpen(false);\n    }\n  };\n  const handleDeclineClick = () => {\n    if (partnerDetails && selectedCheckbox) {\n      if (!isDeclined) {\n        const declinedPartnerWithReason = {\n          ...partnerDetails,\n          declineReason: selectedCheckbox\n        };\n        updatePartnerInSalesForce(declinedPartnerWithReason, \"Declined\");\n        onClose();\n        setIsDeclineModalOpen(false);\n      }\n      const declinedPartnerWithReason = {\n        ...partnerDetails,\n        declineReason: selectedCheckbox\n      };\n      updatePartnerInSalesForce(declinedPartnerWithReason, \"Declined\");\n      onClose();\n      setIsDeclineModalOpen(false);\n    }\n  };\n  const showDeclineModal = () => {\n    setIsDeclineModalOpen(true);\n  };\n  const onDeclined = () => {\n    setIsDeclineModalOpen(false);\n  };\n  const handleCancelDeclined = () => {\n    setIsDeclineModalOpen(false);\n  };\n  const showAcceptModal = () => {\n    setIsAcceptModalOpen(true);\n  };\n  const showNoDQModal = () => {\n    setNoDQModalState(true);\n  };\n  const OnDQModalCancel = () => {\n    setNoDQModalState(false);\n  };\n  const onAccept = () => {\n    setIsAcceptModalOpen(false);\n  };\n  const handleCancelAccept = () => {\n    setIsAcceptModalOpen(false);\n  };\n  const handleCancelRequest = () => {\n    setIsRequestModalOpen(false);\n  };\n  const getDisplayLink = url => {\n    if (!url) {\n      return \"\";\n    }\n    try {\n      const parsedUrl = new URL(url);\n      const path = parsedUrl.pathname === \"/\" ? \"\" : parsedUrl.pathname;\n      return `${parsedUrl.hostname}${path}`;\n    } catch (e) {\n      return url;\n    }\n  };\n  function stripStyles(html) {\n    const domParser = new DOMParser();\n    const document = domParser.parseFromString(html, \"text/html\");\n    const allElements = document.querySelectorAll(\"*\");\n    allElements.forEach(element => element.removeAttribute(\"style\"));\n    return document.body.innerHTML;\n  }\n  const renderAvatar = () => {\n    if (!partnerDetails || !partnerDetails.Client_Logo__c) {\n      return /*#__PURE__*/_jsxDEV(Avatar, {\n        shape: \"square\",\n        size: 48,\n        icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 53\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 14\n      }, this);\n    }\n    const isLink = partnerDetails.Client_Logo__c.startsWith(\"http://\") || partnerDetails.Client_Logo__c.startsWith(\"https://\");\n    if (isLink) {\n      return /*#__PURE__*/_jsxDEV(Avatar, {\n        shape: \"square\",\n        size: 48,\n        src: partnerDetails.Client_Logo__c\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this);\n    }\n    if (partnerDetails.Client_Logo__c.startsWith(\"<img\")) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"48px\",\n          height: \"48px\"\n        },\n        dangerouslySetInnerHTML: {\n          __html: partnerDetails.Client_Logo__c\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(Avatar, {\n      shape: \"square\",\n      size: 48,\n      icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 51\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 12\n    }, this);\n  };\n  const updatePartnerInSalesForce = async (partner, status) => {\n    let updatedFields = {};\n    let endpoint = \"\"; // Мы установим это значение ниже\n\n    // const incentiveName = selectedIncentives.length > 0 ? selectedIncentives[0].incentive : null;\n\n    switch (status) {\n      case \"Accepted\":\n        updatedFields = {\n          Stage_M__c: \"Member Accepted\",\n          DQ_Response__c: partner.DQ_Response__c,\n          Available_Dates_Times__c: interestTextAvailability,\n          Interest_in_Partner__c: partner.Interest_in_Partner__c || \"\"\n        };\n        endpoint = `sobjects/Meeting__c/${partner.key}`;\n        break;\n      case \"Declined\":\n        updatedFields = {\n          Stage_M__c: \"Member Declined\",\n          Decline_Reason__c: partner.declineReason\n        };\n        endpoint = `sobjects/Meeting__c/${partner.key}`;\n        break;\n      case \"Client-Declined\":\n        updatedFields = {\n          Stage_M__c: \"Client Declined\",\n          Client_Decline_Reason__c: \"No to DQ Question\",\n          DQ_Response__c: partner.DQ_Response__c\n        };\n        endpoint = `sobjects/Meeting__c/${partner.key}`;\n        break;\n      case \"Requested\":\n        const today = new Date();\n        const formattedToday = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, \"0\")}-${String(today.getDate()).padStart(2, \"0\")}`;\n        const memberId = await getMemberInfoFromContact(`${clientId}`);\n        if (!memberId) {\n          console.error(\"Cannot find Member ID.\");\n          return;\n        }\n        updatedFields = {\n          RecordTypeId: \"01236000000OoHj\",\n          Stage_M__c: \"Requested by Member\",\n          Member1__c: memberId.Member__c,\n          Member_Account__c: memberId.AccountId,\n          MemberC__c: memberId.Id,\n          Client_Campaign__c: partner.Client_Campaign_ID__c,\n          Meeting_Source__c: \"Member Portal\",\n          Intro_Type__c: \"Bulk\",\n          Request_Submitted_Date_M__c: formattedToday,\n          Interest_in_Partner__c: partner.Interest_in_Partner__c || \"\"\n        };\n        endpoint = `sobjects/Meeting__c/`;\n        break;\n    }\n    try {\n      if (status === \"Requested\") {\n        await createDataInSalesForce(endpoint, updatedFields);\n        success();\n      } else {\n        await updateDataInSalesForce(endpoint, updatedFields);\n        success();\n      }\n    } catch (error) {\n      console.error(`Error processing partner with ID ${partner.key}:`, error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Drawer, {\n    footerStyle: {\n      border: \"none\"\n    },\n    closeIcon: false,\n    width: isMobile ? \"100%\" : isTablet ? \"60%\" : \"40%\",\n    placement: \"right\",\n    onClose: onClose,\n    open: isOpen,\n    children: partnerDetails && /*#__PURE__*/_jsxDEV(\"section\", {\n      className: styles.drawerContainer,\n      children: [/*#__PURE__*/_jsxDEV(NoDQModal, {\n        noDQModalState: noDQModalState,\n        showNoDQModal: showNoDQModal,\n        OnDQModalCancel: OnDQModalCancel,\n        interestTextAvailability: interestTextAvailability,\n        setInterestTextAvailability: setInterestTextAvailability,\n        onRequest: handleNoDQClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(AcceptRequestModal, {\n        isAcceptModalOpen: isAcceptModalOpen,\n        onAcceptShowModal: showAcceptModal,\n        onAccept: handleRequestClick,\n        OnAcceptCancel: handleCancelAccept,\n        interestTextAvailability: interestTextAvailability,\n        setInterestTextAvailability: setInterestTextAvailability,\n        interestText: interestText,\n        setInterestText: setInterestText,\n        onCheckboxChange: handleCheckboxSelect,\n        selectedCheckbox: selectedCheckbox,\n        acceptMeetings: acceptMeetings\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(RequestModal, {\n        selectedCheckbox: selectedCheckbox,\n        onCheckboxChange: handleCheckboxSelect,\n        isDeclineModalOpen: isDeclineModalOpen,\n        onDeclineShowModal: showDeclineModal,\n        onDecline: handleDeclineClick,\n        OnDeclineCancel: handleCancelDeclined\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(RequestTextModal, {\n        isRequestModalOpen: isRequestModalOpen,\n        onRequestShowModal: showRequestModal,\n        onRequest: handleRequestTextClick,\n        OnRequestCancel: handleCancelRequest,\n        interestText: interestText,\n        setInterestText: setInterestText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.closeBtn,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Request details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CloseOutlined, {\n          onClick: onClose\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.drawerTitleContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: renderAvatar()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: partnerDetails.partnerName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            href: partnerDetails.website,\n            children: getDisplayLink(partnerDetails.website)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.drawerBtnContainer,\n        children: partnerDetails.hasRequested ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: isPartnerAccepted,\n            onClick: handleAcceptClick,\n            className: styles.drawerBtn,\n            children: \"Accept\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: isPartnerDeclined,\n            onClick: showDeclineModal,\n            className: styles.drawerBtn,\n            children: \"Decline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: isPartnerRequested,\n            onClick: showRequestModal,\n            className: styles.requestMeetBtn,\n            children: \"Request to Meet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 17\n          }, this)\n        }, void 0, false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"article\", {\n        className: styles.drawerArticle,\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: styles.drawerArticleTitle,\n          children: \"Please review and ensure alignment with your role/interests before accepting this meeting. If not aligned, kindly decline the invitation.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: \"14px\"\n          },\n          className: styles.drawerArticleDescription,\n          dangerouslySetInnerHTML: {\n            __html: stripStyles(marked(partnerDetails.richMerge || \"\"))\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"article\", {\n        className: styles.drawerArticle,\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: styles.drawerArticleTitle,\n          children: partnerDetails.filterCategory ? \"Matching Priority areas\" : \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.drawerArticleDescription,\n          children: [\" \", partnerDetails === null || partnerDetails === void 0 ? void 0 : (_partnerDetails$filte = partnerDetails.filterCategory) === null || _partnerDetails$filte === void 0 ? void 0 : _partnerDetails$filte.join(\", \"), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 425,\n    columnNumber: 5\n  }, this);\n};\n_s(PartnerDrawer, \"4/KnVvLkOKeSyskBePmMUfPjrMc=\", false, function () {\n  return [usePartnerContext, message.useMessage, useParams, useMediaQuery, useMediaQuery];\n});\n_c = PartnerDrawer;\nexport default PartnerDrawer;\nvar _c;\n$RefreshReg$(_c, \"PartnerDrawer\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useMediaQuery","Drawer","Avatar","message","UserOutlined","CloseOutlined","marked","RequestModal","AcceptRequestModal","styles","usePartnerContext","createDataInSalesForce","fetchDataFromSalesForce","updateDataInSalesForce","getMemberInfoFromContact","RequestTextModal","NoDQModal","jsxDEV","_jsxDEV","Fragment","_Fragment","PartnerDrawer","isOpen","onClose","partnerDetails","_s","_partnerDetails$filte","isDeclineModalOpen","setIsDeclineModalOpen","isAcceptModalOpen","setIsAcceptModalOpen","isRequestModalOpen","setIsRequestModalOpen","selectedCheckbox","setSelectedCheckbox","acceptMeetings","setAcceptMeetings","isDQpartner","setIsDQpartner","noDQModalState","setNoDQModalState","addAcceptedPartner","addRequestedPartner","addDeclinedPartner","declinedList","acceptedList","requestedList","removeAcceptedPartner","removeDeclinePartner","isAccepted","setIsAccepted","isDeclined","setIsDeclined","interestText","setInterestText","interestTextAvailability","setInterestTextAvailability","messageApi","contextHolder","useMessage","clientId","isMobile","maxWidth","isTablet","isPartnerAccepted","some","item","key","isPartnerRequested","isPartnerDeclined","showAcceptAnswerModal","salesForceData","clientKey","records","DQ_Question__c","prev","question","console","error","DQPartnerData","DQ_Partner__c","partner","log","showNoDQModal","success","open","type","content","handleAcceptClick","showRequestModal","handleCheckboxSelect","checkboxValue","handleRequestClick","partnerWithInterest","DQ_Response__c","Available_Dates_Times__c","updatePartnerInSalesForce","handleRequestTextClick","Interest_in_Partner__c","handleNoDQClick","handleDeclineClick","declinedPartnerWithReason","declineReason","showDeclineModal","onDeclined","handleCancelDeclined","showAcceptModal","OnDQModalCancel","onAccept","handleCancelAccept","handleCancelRequest","getDisplayLink","url","parsedUrl","URL","path","pathname","hostname","e","stripStyles","html","domParser","DOMParser","document","parseFromString","allElements","querySelectorAll","forEach","element","removeAttribute","body","innerHTML","renderAvatar","Client_Logo__c","shape","size","icon","fileName","_jsxFileName","lineNumber","columnNumber","isLink","startsWith","src","style","width","height","dangerouslySetInnerHTML","__html","status","updatedFields","endpoint","Stage_M__c","Decline_Reason__c","Client_Decline_Reason__c","today","Date","formattedToday","getFullYear","String","getMonth","padStart","getDate","memberId","RecordTypeId","Member1__c","Member__c","Member_Account__c","AccountId","MemberC__c","Id","Client_Campaign__c","Client_Campaign_ID__c","Meeting_Source__c","Intro_Type__c","Request_Submitted_Date_M__c","footerStyle","border","closeIcon","placement","children","className","drawerContainer","onRequest","onAcceptShowModal","OnAcceptCancel","onCheckboxChange","onDeclineShowModal","onDecline","OnDeclineCancel","onRequestShowModal","OnRequestCancel","closeBtn","onClick","drawerTitleContainer","partnerName","target","rel","href","website","drawerBtnContainer","hasRequested","disabled","drawerBtn","requestMeetBtn","drawerArticle","drawerArticleTitle","fontSize","drawerArticleDescription","richMerge","filterCategory","join","_c","$RefreshReg$"],"sources":["/Users/shannoncoakley/Documents/mp/src/components/sections/homeSection/PartnerDrawer.tsx"],"sourcesContent":["import React, { FC, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useMediaQuery } from \"react-responsive\";\nimport { Drawer, Avatar, message } from \"antd\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport { CloseOutlined } from \"@ant-design/icons\";\nimport { marked } from \"marked\";\n\nimport RequestModal from \"./ui/RequestModal\";\nimport AcceptRequestModal from \"./ui/AcceptRequestModal\";\n\nimport styles from \"./styles.module.sass\";\nimport { usePartnerContext } from \"./contexts/IncentivesContext\";\nimport {\n  createDataInSalesForce,\n  fetchDataFromSalesForce,\n  updateDataInSalesForce,\n} from \"../../../salesforceAuth\";\nimport { getMemberInfoFromContact } from \"../../../getSalesForceData\";\nimport RequestTextModal from \"./ui/RequestTextModal\";\nimport NoDQModal from \"./ui/NoDQModal\";\n\ninterface partnerQuestion {\n  question: string;\n}\ninterface partner {\n  partner: boolean;\n}\n\ninterface PartnersDataType {\n  DQ_Response__c?: string;\n  key: string;\n  partnerName: string;\n  overview: string;\n  hasRequested: boolean;\n  website?: string;\n  richMerge?: string;\n  surveyOptionName?: string[];\n  Related_Membership_Member__c: string;\n  Related_Membership__c: string;\n  Survey_Option_Name__c: string[];\n  filterCategory?: string[];\n  Client_Logo__c?: string;\n  Stage_M__c?: string;\n  Stage_MP__c?: string;\n  Sweepstakes_Type__c?: string;\n  Client_Campaign_ID__c?: string;\n  Interest_in_Partner__c?: string;\n  RecordTypeId?: string;\n  Client_Campaign__c?: string;\n  Meeting_Source__c?: string;\n  Intro_Type__c?: string;\n  Request_Submitted_Date_M__c?: string;\n  declineReason?: string | JSX.Element;\n  Client_Decline_Reason__c?: string;\n  clientKey?: string;\n}\ninterface PartnerDrawerProps {\n  isOpen: boolean;\n  onClose: () => void;\n  partnerDetails: PartnersDataType | null;\n}\nconst PartnerDrawer: FC<PartnerDrawerProps> = ({\n  isOpen,\n  onClose,\n  partnerDetails,\n}) => {\n  const [isDeclineModalOpen, setIsDeclineModalOpen] = useState(false);\n  const [isAcceptModalOpen, setIsAcceptModalOpen] = useState(false);\n  const [isRequestModalOpen, setIsRequestModalOpen] = useState(false);\n  const [selectedCheckbox, setSelectedCheckbox] = useState<string | null>(\n    \"No interest\"\n  );\n  const [acceptMeetings, setAcceptMeetings] = useState<partnerQuestion | null>(\n    null\n  );\n  const [isDQpartner, setIsDQpartner] = useState<partner | null>(null);\n  const [noDQModalState, setNoDQModalState] = useState(false);\n\n  const {\n    addAcceptedPartner,\n    addRequestedPartner,\n    addDeclinedPartner,\n    declinedList,\n    acceptedList,\n    requestedList,\n    removeAcceptedPartner,\n    removeDeclinePartner,\n  } = usePartnerContext();\n  const [isAccepted, setIsAccepted] = useState(false);\n  const [isDeclined, setIsDeclined] = useState(false);\n  const [interestText, setInterestText] = useState(\"\");\n  const [interestTextAvailability, setInterestTextAvailability] = useState(\"\");\n  const [messageApi, contextHolder] = message.useMessage();\n  const { clientId } = useParams<{ clientId: string }>();\n\n  const isMobile = useMediaQuery({ maxWidth: 610 });\n  const isTablet = useMediaQuery({ maxWidth: 1024 });\n\n  const isPartnerAccepted = acceptedList.some(\n    (item) => item.key === partnerDetails?.key\n  );\n  const isPartnerRequested = requestedList.some(\n    (item) => item.key === partnerDetails?.key\n  );\n  const isPartnerDeclined = declinedList.some(\n    (item) => item.key === partnerDetails?.key\n  );\n\n  const showAcceptAnswerModal = async () => {\n    try {\n      if (partnerDetails) {\n        const salesForceData = await fetchDataFromSalesForce(\n          `query/?q=SELECT+Id,Client_Name__c,Stage_MP__c,DQ_Partner__c,DQ_Question__c+FROM+Meeting__c+WHERE+DQ_Partner__c=true+AND+MemberC__c='${clientId}'+AND+(Client_Id__c='${partnerDetails.clientKey}'+OR+Client_Id__c='${partnerDetails.key}')`\n        );\n        if (\n          salesForceData &&\n          salesForceData.records &&\n          salesForceData.records[0] &&\n          salesForceData.records[0].DQ_Question__c\n        ) {\n          setAcceptMeetings((prev) => ({\n            ...prev!,\n            question: salesForceData.records[0].DQ_Question__c,\n          }));\n        } else {\n          console.error(\"Invalid data format:\", salesForceData);\n        }\n      }\n\n      if (partnerDetails) {\n        const DQPartnerData = await fetchDataFromSalesForce(\n          `query/?q=SELECT+DQ_Partner__c+FROM+Meeting__c+WHERE+MemberC__c='${clientId}'+AND+(Client_Id__c='${partnerDetails.clientKey}'+OR+Client_Id__c='${partnerDetails.key}')`\n        );\n        if (\n          DQPartnerData &&\n          DQPartnerData.records &&\n          DQPartnerData.records[0] &&\n          DQPartnerData.records[0].DQ_Partner__c\n        ) {\n          setIsDQpartner((prev) => ({\n            ...prev!,\n            partner: DQPartnerData.records[0].DQ_Partner__c,\n          }));\n          setIsAcceptModalOpen(true);\n        } else {\n          console.log(\"no DQ Modal\");\n          showNoDQModal();\n        }\n      }\n    } catch (error) {\n      console.error(\"Error fetching partner details:\", error);\n    } finally {\n      // setLoadingPartnerDetails(false);\n    }\n  };\n\n  useEffect(() => {\n    if (partnerDetails) {\n      setIsAccepted(\n        acceptedList.some((item) => item.key === partnerDetails.key)\n      );\n      setIsDeclined(\n        declinedList.some((item) => item.key === partnerDetails.key)\n      );\n    }\n  }, [partnerDetails, acceptedList, declinedList]);\n\n  const success = () => {\n    messageApi.open({\n      type: \"success\",\n      content: \"Data sent successfully\",\n    });\n  };\n\n  const handleAcceptClick = () => {\n    showAcceptAnswerModal();\n  };\n\n  const showRequestModal = () => {\n    setIsRequestModalOpen(true);\n  };\n\n  const handleCheckboxSelect = (checkboxValue: string) => {\n    setSelectedCheckbox(checkboxValue);\n  };\n\n  const handleRequestClick = () => {\n    if (partnerDetails) {\n      if (selectedCheckbox === \"Yes\") {\n        const partnerWithInterest = {\n          ...partnerDetails,\n          DQ_Response__c: selectedCheckbox,\n          Available_Dates_Times__c: interestTextAvailability,\n        };\n        console.log({ partnerWithInterest });\n        updatePartnerInSalesForce(partnerWithInterest, \"Accepted\");\n        onClose();\n        setInterestTextAvailability(\"\");\n        setIsAcceptModalOpen(false);\n      } else if (selectedCheckbox === \"No\") {\n        const partnerWithInterest = {\n          ...partnerDetails,\n          DQ_Response__c: selectedCheckbox,\n        };\n        console.log({ partnerWithInterest });\n        updatePartnerInSalesForce(partnerWithInterest, \"Client-Declined\");\n        onClose();\n        setInterestTextAvailability(\"\");\n        setIsAcceptModalOpen(false);\n      }\n    }\n  };\n\n  const handleRequestTextClick = () => {\n    if (partnerDetails) {\n      const partnerWithInterest = {\n        ...partnerDetails,\n        Interest_in_Partner__c: interestText,\n      };\n      updatePartnerInSalesForce(partnerWithInterest, \"Requested\");\n      onClose();\n      setInterestTextAvailability(\"\");\n      setIsAcceptModalOpen(false);\n    }\n  };\n\n  const handleNoDQClick = () => {\n    if (partnerDetails) {\n      const partnerWithInterest = {\n        ...partnerDetails,\n        Available_Dates_Times__c: interestTextAvailability,\n      };\n      updatePartnerInSalesForce(partnerWithInterest, \"Accepted\");\n      onClose();\n      setInterestTextAvailability(\"\");\n      setIsAcceptModalOpen(false);\n    }\n  };\n\n  const handleDeclineClick = () => {\n    if (partnerDetails && selectedCheckbox) {\n      if (!isDeclined) {\n        const declinedPartnerWithReason = {\n          ...partnerDetails,\n          declineReason: selectedCheckbox,\n        };\n        updatePartnerInSalesForce(declinedPartnerWithReason, \"Declined\");\n        onClose();\n        setIsDeclineModalOpen(false);\n      }\n      const declinedPartnerWithReason = {\n        ...partnerDetails,\n        declineReason: selectedCheckbox,\n      };\n      updatePartnerInSalesForce(declinedPartnerWithReason, \"Declined\");\n      onClose();\n      setIsDeclineModalOpen(false);\n    }\n  };\n\n  const showDeclineModal = () => {\n    setIsDeclineModalOpen(true);\n  };\n\n  const onDeclined = () => {\n    setIsDeclineModalOpen(false);\n  };\n\n  const handleCancelDeclined = () => {\n    setIsDeclineModalOpen(false);\n  };\n\n  const showAcceptModal = () => {\n    setIsAcceptModalOpen(true);\n  };\n\n  const showNoDQModal = () => {\n    setNoDQModalState(true);\n  };\n\n  const OnDQModalCancel = () => {\n    setNoDQModalState(false);\n  };\n\n  const onAccept = () => {\n    setIsAcceptModalOpen(false);\n  };\n\n  const handleCancelAccept = () => {\n    setIsAcceptModalOpen(false);\n  };\n\n  const handleCancelRequest = () => {\n    setIsRequestModalOpen(false);\n  };\n\n  const getDisplayLink = (url: string | undefined) => {\n    if (!url) {\n      return \"\";\n    }\n    try {\n      const parsedUrl = new URL(url);\n      const path = parsedUrl.pathname === \"/\" ? \"\" : parsedUrl.pathname;\n      return `${parsedUrl.hostname}${path}`;\n    } catch (e) {\n      return url;\n    }\n  };\n\n  function stripStyles(html: string) {\n    const domParser = new DOMParser();\n    const document = domParser.parseFromString(html, \"text/html\");\n    const allElements = document.querySelectorAll(\"*\");\n    allElements.forEach((element) => element.removeAttribute(\"style\"));\n    return document.body.innerHTML;\n  }\n\n  const renderAvatar = () => {\n    if (!partnerDetails || !partnerDetails.Client_Logo__c) {\n      return <Avatar shape=\"square\" size={48} icon={<UserOutlined />} />;\n    }\n\n    const isLink =\n      partnerDetails.Client_Logo__c.startsWith(\"http://\") ||\n      partnerDetails.Client_Logo__c.startsWith(\"https://\");\n\n    if (isLink) {\n      return (\n        <Avatar shape=\"square\" size={48} src={partnerDetails.Client_Logo__c} />\n      );\n    }\n\n    if (partnerDetails.Client_Logo__c.startsWith(\"<img\")) {\n      return (\n        <div\n          style={{ width: \"48px\", height: \"48px\" }}\n          dangerouslySetInnerHTML={{ __html: partnerDetails.Client_Logo__c }}\n        />\n      );\n    }\n\n    return <Avatar shape=\"square\" size={48} icon={<UserOutlined />} />;\n  };\n\n  const updatePartnerInSalesForce = async (\n    partner: PartnersDataType,\n    status: string\n  ) => {\n    let updatedFields = {};\n    let endpoint = \"\"; // Мы установим это значение ниже\n\n    // const incentiveName = selectedIncentives.length > 0 ? selectedIncentives[0].incentive : null;\n\n    switch (status) {\n      case \"Accepted\":\n        updatedFields = {\n          Stage_M__c: \"Member Accepted\",\n          DQ_Response__c: partner.DQ_Response__c,\n          Available_Dates_Times__c: interestTextAvailability,\n          Interest_in_Partner__c: partner.Interest_in_Partner__c || \"\"\n        };\n        endpoint = `sobjects/Meeting__c/${partner.key}`;\n        break;\n\n      case \"Declined\":\n        updatedFields = {\n          Stage_M__c: \"Member Declined\",\n          Decline_Reason__c: partner.declineReason,\n        };\n        endpoint = `sobjects/Meeting__c/${partner.key}`;\n        break;\n\n      case \"Client-Declined\":\n        updatedFields = {\n          Stage_M__c: \"Client Declined\",\n          Client_Decline_Reason__c: \"No to DQ Question\",\n          DQ_Response__c: partner.DQ_Response__c,\n        };\n        endpoint = `sobjects/Meeting__c/${partner.key}`;\n        break;\n\n      case \"Requested\":\n        const today = new Date();\n        const formattedToday = `${today.getFullYear()}-${String(\n          today.getMonth() + 1\n        ).padStart(2, \"0\")}-${String(today.getDate()).padStart(2, \"0\")}`;\n\n        const memberId = await getMemberInfoFromContact(`${clientId}`);\n        if (!memberId) {\n          console.error(\"Cannot find Member ID.\");\n          return;\n        }\n\n        updatedFields = {\n          RecordTypeId: \"01236000000OoHj\",\n          Stage_M__c: \"Requested by Member\",\n          Member1__c: memberId.Member__c,\n          Member_Account__c: memberId.AccountId,\n          MemberC__c: memberId.Id,\n          Client_Campaign__c: partner.Client_Campaign_ID__c,\n          Meeting_Source__c: \"Member Portal\",\n          Intro_Type__c: \"Bulk\",\n          Request_Submitted_Date_M__c: formattedToday,\n          Interest_in_Partner__c: partner.Interest_in_Partner__c || \"\",\n        };\n        endpoint = `sobjects/Meeting__c/`;\n        break;\n    }\n\n    try {\n      if (status === \"Requested\") {\n        await createDataInSalesForce(endpoint, updatedFields);\n        success();\n      } else {\n        await updateDataInSalesForce(endpoint, updatedFields);\n        success();\n      }\n    } catch (error) {\n      console.error(`Error processing partner with ID ${partner.key}:`, error);\n    }\n  };\n\n  return (\n    <Drawer\n      footerStyle={{ border: \"none\" }}\n      closeIcon={false}\n      width={isMobile ? \"100%\" : isTablet ? \"60%\" : \"40%\"}\n      placement=\"right\"\n      onClose={onClose}\n      open={isOpen}\n    >\n      {partnerDetails && (\n        <section className={styles.drawerContainer}>\n          <NoDQModal\n            noDQModalState={noDQModalState}\n            showNoDQModal={showNoDQModal}\n            OnDQModalCancel={OnDQModalCancel}\n            interestTextAvailability={interestTextAvailability}\n            setInterestTextAvailability={setInterestTextAvailability}\n            onRequest={handleNoDQClick}\n          />\n          <AcceptRequestModal\n            isAcceptModalOpen={isAcceptModalOpen}\n            onAcceptShowModal={showAcceptModal}\n            onAccept={handleRequestClick}\n            OnAcceptCancel={handleCancelAccept}\n            interestTextAvailability={interestTextAvailability}\n            setInterestTextAvailability={setInterestTextAvailability}\n            interestText={interestText}\n            setInterestText={setInterestText}\n            onCheckboxChange={handleCheckboxSelect}\n            selectedCheckbox={selectedCheckbox}\n            acceptMeetings={acceptMeetings}\n          />\n          <RequestModal\n            selectedCheckbox={selectedCheckbox}\n            onCheckboxChange={handleCheckboxSelect}\n            isDeclineModalOpen={isDeclineModalOpen}\n            onDeclineShowModal={showDeclineModal}\n            onDecline={handleDeclineClick}\n            OnDeclineCancel={handleCancelDeclined}\n          />\n          <RequestTextModal\n            isRequestModalOpen={isRequestModalOpen}\n            onRequestShowModal={showRequestModal}\n            onRequest={handleRequestTextClick}\n            OnRequestCancel={handleCancelRequest}\n            interestText={interestText}\n            setInterestText={setInterestText}\n          />\n          <div className={styles.closeBtn}>\n            <h2>Request details</h2>\n            <CloseOutlined onClick={onClose} />\n          </div>\n          <div className={styles.drawerTitleContainer}>\n            <div>{renderAvatar()}</div>\n            <div>\n              <h3>{partnerDetails.partnerName}</h3>\n              <a\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href={partnerDetails.website}\n              >\n                {getDisplayLink(partnerDetails.website)}\n              </a>\n            </div>\n          </div>\n          <div className={styles.drawerBtnContainer}>\n            {partnerDetails.hasRequested ? (\n              <>\n                <button\n                  disabled={isPartnerAccepted}\n                  onClick={handleAcceptClick}\n                  className={styles.drawerBtn}\n                >\n                  Accept\n                </button>\n                <button\n                  disabled={isPartnerDeclined}\n                  onClick={showDeclineModal}\n                  className={styles.drawerBtn}\n                >\n                  Decline\n                </button>\n              </>\n            ) : (\n              <>\n                <button\n                  disabled={isPartnerRequested}\n                  onClick={showRequestModal}\n                  className={styles.requestMeetBtn}\n                >\n                  Request to Meet\n                </button>\n              </>\n            )}\n          </div>\n          <br></br>\n          <article className={styles.drawerArticle}>\n            <h4 className={styles.drawerArticleTitle}>\n              Please review and ensure alignment with your role/interests before\n              accepting this meeting. If not aligned, kindly decline the\n              invitation.\n            </h4>\n            <p\n              style={{ fontSize: \"14px\" }}\n              className={styles.drawerArticleDescription}\n              dangerouslySetInnerHTML={{\n                __html: stripStyles(marked(partnerDetails.richMerge || \"\")),\n              }}\n            ></p>\n          </article>\n          <br></br>\n          <article className={styles.drawerArticle}>\n            <h4 className={styles.drawerArticleTitle}>\n              {partnerDetails.filterCategory ? \"Matching Priority areas\" : \"\"}\n            </h4>\n            <p className={styles.drawerArticleDescription}>\n              {\" \"}\n              {partnerDetails?.filterCategory?.join(\", \")}{\" \"}\n            </p>\n          </article>\n        </section>\n      )}\n    </Drawer>\n  );\n};\n\nexport default PartnerDrawer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}