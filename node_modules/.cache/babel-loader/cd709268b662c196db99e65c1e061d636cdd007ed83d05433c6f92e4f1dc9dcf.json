{"ast":null,"code":"import _toConsumableArray from\"/Users/shannoncoakley/Documents/GitHub/mp/memberportal/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/shannoncoakley/Documents/GitHub/mp/memberportal/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/shannoncoakley/Documents/GitHub/mp/memberportal/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/shannoncoakley/Documents/GitHub/mp/memberportal/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/shannoncoakley/Documents/GitHub/mp/memberportal/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useMemo,useState}from\"react\";import{Space,Table,Pagination}from\"antd\";import{useGetPartnersAndIncentivesContext,usePartnerContext}from\"./contexts/IncentivesContext\";import PartnerDrawer from\"./PartnerDrawer\";import PartnerModal from\"./PartnerModal\";import styles from\"./styles.module.sass\";import{ReactComponent as Filter}from\"../../../images/svgIcons/filter.svg\";import{ReactComponent as AcceptIcon}from\"../../../images/svgIcons/acceptIcon.svg\";import{ReactComponent as DeclineIcon}from\"../../../images/svgIcons/declineIcon.svg\";import{ReactComponent as ProgressIcon}from\"../../../images/svgIcons/progressIcon.svg\";import{ReactComponent as DefaultIcon}from\"../../../images/svgIcons/defaultIcon.svg\";import{useParams}from\"react-router-dom\";import{useSalesForceData,useSalesForceDataWithThreeQueries}from\"../../../getSalesForceData\";import{fetchDataFromSalesForce}from\"../../../salesforceAuth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var QUERY1=function QUERY1(clientId){return\"query/?q=SELECT+Id,Client_Id__c,Client_Name__c,Related_Membership_Member__c,Quick_Overview__c,Client_Website__c,Client_Logo__c,Stage_M__c,Stage_MP__c,Sweepstakes_Type__c+FROM+Meeting__c+WHERE+Stage_M__c='Request+Queued'+AND+MemberC__c='\".concat(clientId,\"'\");};var QUERY2=\"query/?q=SELECT+Id,Account_ID__c,Related_Membership__c,Account_Name_Merge_Only__c,Website,Client_Logo__c,Quick_Overview__c,Client_Campaign_ID__c+FROM+Account+WHERE+RecordTypeId='01236000000OodE'+AND+(Client_Campaign_Status__c='Active'+OR+Client_Campaign_Status__c='Testing')\";var QUERY3=function QUERY3(recordIds){return\"query/?q=SELECT+Client_Name__c,Survey_Option_Name__c+FROM+Survey__c+WHERE+Client_Name__c+IN+(\".concat(recordIds.map(function(id){return\"'\".concat(id,\"'\");}).join(\",\"),\")\");};var transformer=function transformer(primaryData,relatedData){var surveyOptions=Array.isArray(relatedData===null||relatedData===void 0?void 0:relatedData.Survey_Option_Name__c)?relatedData.Survey_Option_Name__c:Array.isArray(relatedData===null||relatedData===void 0?void 0:relatedData.Survey_Option_Name__c)?[relatedData.Survey_Option_Name__c]:[];return{key:primaryData.Id,clientKey:primaryData.Client_Id__c||primaryData.Account_ID__c,website:primaryData.Client_Website__c||primaryData.Website,partnerName:primaryData.Client_Name__c||primaryData.Account_Name_Merge_Only__c,overview:primaryData.Quick_Overview__c||\"No quick overview\",hasRequested:primaryData.Stage_M__c===\"Request Queued\",richMerge:primaryData.Rich_Merge__c,Survey_Option_Name__c:surveyOptions,Stage_M__c:primaryData.Stage_M__c||\"\",Stage_MP__c:primaryData.Stage_MP__c||\"\",Sweepstakes_Type__c:primaryData.Sweepstakes_Type__c||\"\",Client_Campaign_ID__c:primaryData.Client_Campaign_ID__c,Related_Membership__c:primaryData.Related_Membership__c,Related_Membership_Member__c:primaryData.Related_Membership_Member__c,Client_Logo__c:primaryData.Client_Logo__c};};var QUERY_REQUESTED_MEETINGS=function QUERY_REQUESTED_MEETINGS(clientId){return\"query/?q=SELECT+Client_Id__c+FROM+Meeting__c+WHERE+Stage_M__c!='Request Queued'+AND+MemberC__c='\".concat(clientId,\"'\");};var clientIDTransformer=function clientIDTransformer(record){return record.Client_Id__c;};var PartnersSection=function PartnersSection(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),filteredInfo=_useState2[0],setFilteredInfo=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),sortedInfo=_useState4[0],setSortedInfo=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),open=_useState6[0],setOpen=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedPartner=_useState8[0],setSelectedPartner=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isModalOpen=_useState10[0],setIsModalOpen=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),viewOnlyRequested=_useState12[0],setViewOnlyRequested=_useState12[1];var _useState13=useState(1),_useState14=_slicedToArray(_useState13,2),currentPage=_useState14[0],setCurrentPage=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),searchValue=_useState16[0],setSearchValue=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),loadingPartnerDetails=_useState18[0],setLoadingPartnerDetails=_useState18[1];var _useState19=useState(true),_useState20=_slicedToArray(_useState19,2),appliedViewOnlyRequested=_useState20[0],setAppliedViewOnlyRequested=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),selectedCategories=_useState22[0],setSelectedCategories=_useState22[1];var _usePartnerContext=usePartnerContext(),requestedList=_usePartnerContext.requestedList,declinedList=_usePartnerContext.declinedList,acceptedList=_usePartnerContext.acceptedList,savedAcceptedList=_usePartnerContext.savedAcceptedList,setSavedAcceptedList=_usePartnerContext.setSavedAcceptedList;var _useGetPartnersAndInc=useGetPartnersAndIncentivesContext(),incentiveFromSalesForce=_useGetPartnersAndInc.incentiveFromSalesForce;var _useParams=useParams(),clientId=_useParams.clientId;var _useSalesForceDataWit=useSalesForceDataWithThreeQueries(QUERY1(clientId),QUERY2,QUERY3,transformer),partnersFromSalesForce=_useSalesForceDataWit.data,fetchData=_useSalesForceDataWit.fetchData;var requestedClientIDs=useSalesForceData(QUERY_REQUESTED_MEETINGS(clientId),clientIDTransformer);useEffect(function(){if(partnersFromSalesForce&&partnersFromSalesForce.length>0){var filteredPartners=partnersFromSalesForce.filter(function(partner,index,self){return self.findIndex(function(p){return p.clientKey===partner.clientKey;})===index;});setSavedAcceptedList(filteredPartners);}},[partnersFromSalesForce]);var showModal=function showModal(){setIsModalOpen(true);};var handleOk=function handleOk(){setIsModalOpen(false);};var handleCancel=function handleCancel(){setIsModalOpen(false);};var showDrawer=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(partner){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setSelectedPartner(partner);setLoadingPartnerDetails(true);_context.prev=2;_context.next=5;return fetchDataFromSalesForce(\"query/?q=SELECT+Rich_Merge__c+FROM+Client_Pitch__c+WHERE+Active__c=true+AND+Custom_Outreach__c=true+AND+(Client_Id__c='\".concat(partner.clientKey,\"'+OR+Client_Id__c='\").concat(partner.key,\"')\"));case 5:response=_context.sent;if(response&&response.records&&response.records[0]&&response.records[0].Rich_Merge__c){setSelectedPartner(function(prev){return _objectSpread(_objectSpread({},prev),{},{richMerge:response.records[0].Rich_Merge__c});});}else{console.error(\"Invalid data format:\",response);}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);console.error(\"Error fetching partner details:\",_context.t0);case 12:_context.prev=12;setLoadingPartnerDetails(false);return _context.finish(12);case 15:setOpen(true);case 16:case\"end\":return _context.stop();}},_callee,null,[[2,9,12,15]]);}));return function showDrawer(_x){return _ref.apply(this,arguments);};}();var onCloseDrawer=function onCloseDrawer(){setSelectedPartner(null);setOpen(false);setTimeout(function(){fetchData();},5000);};var handleChangePage=function handleChangePage(page){setCurrentPage(page);};var getPartnerStatus=function getPartnerStatus(partner){if(acceptedList.some(function(item){return item.key===partner.key;})){return\"accepted\";}else if(requestedList.some(function(item){return item.key===partner.key;})){return\"requested\";}else if(declinedList.some(function(item){return item.key===partner.key;})){return\"declined\";}return\"\";};var handleChange=function handleChange(pagination,filters,sorter){console.log(\"Various parameters\",pagination,filters,sorter);setFilteredInfo(filters);setSortedInfo(sorter);};var handleViewOnlyRequestedChange=function handleViewOnlyRequestedChange(checked){setCurrentPage(1);setViewOnlyRequested(checked);};var handleApply=function handleApply(value,viewOnlyRequested,selectedCategories){setSearchValue(value);setAppliedViewOnlyRequested(viewOnlyRequested);setSelectedCategories(selectedCategories);handleOk();};var filteredData=useMemo(function(){var filtered=_toConsumableArray(savedAcceptedList);// Клонировать массив, чтобы избежать мутации\nif(searchValue){filtered=filtered.filter(function(partner){return partner.partnerName.toLowerCase().includes(searchValue.toLowerCase())||partner.overview.toLowerCase().includes(searchValue.toLowerCase());});}if(selectedCategories.length){filtered=filtered.map(function(partner){var matchingCategories=selectedCategories.filter(function(category){var _partner$Survey_Optio;return(_partner$Survey_Optio=partner.Survey_Option_Name__c)===null||_partner$Survey_Optio===void 0?void 0:_partner$Survey_Optio.some(function(option){return option===category;});});if(matchingCategories.length){return _objectSpread(_objectSpread({},partner),{},{filterCategory:matchingCategories});}return partner;}).filter(function(partner){return partner.filterCategory&&partner.filterCategory.length;});}if(requestedClientIDs&&requestedClientIDs.length>0){filtered=filtered.filter(function(partner){return partner.clientKey&&!requestedClientIDs.includes(partner.clientKey);});}if(appliedViewOnlyRequested){filtered=filtered.filter(function(item){return item.hasRequested;});}return filtered;},[savedAcceptedList,searchValue,appliedViewOnlyRequested,selectedCategories,requestedClientIDs]);var sortedData=useMemo(function(){if(sortedInfo&&sortedInfo.columnKey===\"name\"){if(sortedInfo.order===\"ascend\"){return _toConsumableArray(filteredData).sort(function(a,b){return a.partnerName.localeCompare(b.partnerName);});}else if(sortedInfo.order===\"descend\"){return _toConsumableArray(filteredData).sort(function(a,b){return b.partnerName.localeCompare(a.partnerName);});}}return filteredData;// Если sortedInfo.order не 'ascend' или 'descend', возвращаем исходные данные\n},[filteredData,sortedInfo]);var startIndex=(currentPage-1)*10;var endIndex=startIndex+10;var paginatedData=sortedData?sortedData.slice(startIndex,endIndex):[];var columns=[{title:\"NAME\",dataIndex:\"partnerName\",key:\"name\",filteredValue:filteredInfo.partnerName||null,onFilter:function onFilter(value,record){return record.partnerName.includes(value.toString());},sorter:function sorter(a,b){return a.partnerName.localeCompare(b.partnerName);},sortOrder:sortedInfo.columnKey===\"name\"?sortedInfo.order:null,render:function render(text,record){var displayText=record.hasRequested&&record.partnerName?record.partnerName.slice(0):text;var partnerStatus=getPartnerStatus(record);return/*#__PURE__*/_jsxs(\"div\",{className:styles.partnersNameContainer,children:[/*#__PURE__*/_jsxs(\"span\",{className:styles.partnersName,children:[partnerStatus===\"requested\"?/*#__PURE__*/_jsx(ProgressIcon,{className:styles.statusIcon}):partnerStatus===\"accepted\"?/*#__PURE__*/_jsx(AcceptIcon,{className:styles.statusIcon}):partnerStatus===\"declined\"?/*#__PURE__*/_jsx(DeclineIcon,{className:styles.statusIcon}):/*#__PURE__*/_jsx(DefaultIcon,{className:styles.statusIcon}),displayText]}),record.hasRequested&&/*#__PURE__*/_jsx(\"span\",{className:styles.orangeStar,children:\" \\u2605\"})]});}},{title:\"Quick Overview\",dataIndex:\"overview\",key:\"overview\",width:\"65%\",render:function render(text,record){var partnerStatus=getPartnerStatus(record);return/*#__PURE__*/_jsx(\"span\",{children:text});}}];return/*#__PURE__*/_jsxs(\"section\",{className:styles.partnersContainer,children:[/*#__PURE__*/_jsx(PartnerModal,{isModalOpen:isModalOpen,onShowModal:showModal,onOk:handleOk,OnCancel:handleCancel,onViewOnlyRequestedChange:handleViewOnlyRequestedChange,onApply:handleApply}),/*#__PURE__*/_jsxs(\"div\",{className:styles.partnersTitleContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.partnersTitle,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Partners\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Click a partner name below for more information\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:showModal,className:styles.filterBtn,children:[\" \",/*#__PURE__*/_jsx(Filter,{}),\" Filter\"]})]}),/*#__PURE__*/_jsx(Space,{style:{marginBottom:16}}),/*#__PURE__*/_jsx(Table,{onRow:function onRow(record){return{onClick:function onClick(){return showDrawer(record);}};},columns:columns,pagination:false,dataSource:paginatedData,onChange:handleChange,className:styles.table}),/*#__PURE__*/_jsx(Pagination,{showSizeChanger:false,defaultPageSize:10,className:styles.paginationPartners,defaultCurrent:currentPage,total:filteredData.length,onChange:handleChangePage}),/*#__PURE__*/_jsx(\"small\",{className:styles.requested,children:\"Partners who have requested to meet with you.\"}),/*#__PURE__*/_jsx(PartnerDrawer,{isOpen:open,onClose:onCloseDrawer,partnerDetails:selectedPartner})]});};export default PartnersSection;","map":{"version":3,"names":["useEffect","useMemo","useState","Space","Table","Pagination","useGetPartnersAndIncentivesContext","usePartnerContext","PartnerDrawer","PartnerModal","styles","ReactComponent","Filter","AcceptIcon","DeclineIcon","ProgressIcon","DefaultIcon","useParams","useSalesForceData","useSalesForceDataWithThreeQueries","fetchDataFromSalesForce","jsx","_jsx","jsxs","_jsxs","QUERY1","clientId","concat","QUERY2","QUERY3","recordIds","map","id","join","transformer","primaryData","relatedData","surveyOptions","Array","isArray","Survey_Option_Name__c","key","Id","clientKey","Client_Id__c","Account_ID__c","website","Client_Website__c","Website","partnerName","Client_Name__c","Account_Name_Merge_Only__c","overview","Quick_Overview__c","hasRequested","Stage_M__c","richMerge","Rich_Merge__c","Stage_MP__c","Sweepstakes_Type__c","Client_Campaign_ID__c","Related_Membership__c","Related_Membership_Member__c","Client_Logo__c","QUERY_REQUESTED_MEETINGS","clientIDTransformer","record","PartnersSection","_useState","_useState2","_slicedToArray","filteredInfo","setFilteredInfo","_useState3","_useState4","sortedInfo","setSortedInfo","_useState5","_useState6","open","setOpen","_useState7","_useState8","selectedPartner","setSelectedPartner","_useState9","_useState10","isModalOpen","setIsModalOpen","_useState11","_useState12","viewOnlyRequested","setViewOnlyRequested","_useState13","_useState14","currentPage","setCurrentPage","_useState15","_useState16","searchValue","setSearchValue","_useState17","_useState18","loadingPartnerDetails","setLoadingPartnerDetails","_useState19","_useState20","appliedViewOnlyRequested","setAppliedViewOnlyRequested","_useState21","_useState22","selectedCategories","setSelectedCategories","_usePartnerContext","requestedList","declinedList","acceptedList","savedAcceptedList","setSavedAcceptedList","_useGetPartnersAndInc","incentiveFromSalesForce","_useParams","_useSalesForceDataWit","partnersFromSalesForce","data","fetchData","requestedClientIDs","length","filteredPartners","filter","partner","index","self","findIndex","p","showModal","handleOk","handleCancel","showDrawer","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","sent","records","_objectSpread","console","error","t0","finish","stop","_x","apply","arguments","onCloseDrawer","setTimeout","handleChangePage","page","getPartnerStatus","some","item","handleChange","pagination","filters","sorter","log","handleViewOnlyRequestedChange","checked","handleApply","value","filteredData","filtered","_toConsumableArray","toLowerCase","includes","matchingCategories","category","_partner$Survey_Optio","option","filterCategory","sortedData","columnKey","order","sort","a","b","localeCompare","startIndex","endIndex","paginatedData","slice","columns","title","dataIndex","filteredValue","onFilter","toString","sortOrder","render","text","displayText","partnerStatus","className","partnersNameContainer","children","partnersName","statusIcon","orangeStar","width","partnersContainer","onShowModal","onOk","OnCancel","onViewOnlyRequestedChange","onApply","partnersTitleContainer","partnersTitle","onClick","filterBtn","style","marginBottom","onRow","dataSource","onChange","table","showSizeChanger","defaultPageSize","paginationPartners","defaultCurrent","total","requested","isOpen","onClose","partnerDetails"],"sources":["/Users/shannoncoakley/Documents/GitHub/mp/memberportal/src/components/sections/homeSection/PartnersSection.tsx"],"sourcesContent":["import { FC, useContext, useEffect, useMemo, useState } from \"react\";\nimport axios from \"axios\";\nimport type { TableProps } from \"antd\";\nimport { Space, Table, Drawer, Pagination, Spin } from \"antd\";\nimport type {\n  ColumnsType,\n  FilterValue,\n  SorterResult,\n} from \"antd/es/table/interface\";\nimport {\n  GetIncentiveDataType,\n  useGetPartnersAndIncentivesContext,\n  usePartnerContext,\n} from \"./contexts/IncentivesContext\";\nimport PartnerDrawer from \"./PartnerDrawer\";\nimport PartnerModal from \"./PartnerModal\";\nimport styles from \"./styles.module.sass\";\nimport { ReactComponent as Filter } from \"../../../images/svgIcons/filter.svg\";\nimport { ReactComponent as AcceptIcon } from \"../../../images/svgIcons/acceptIcon.svg\";\nimport { ReactComponent as DeclineIcon } from \"../../../images/svgIcons/declineIcon.svg\";\nimport { ReactComponent as ProgressIcon } from \"../../../images/svgIcons/progressIcon.svg\";\nimport { ReactComponent as DefaultIcon } from \"../../../images/svgIcons/defaultIcon.svg\";\nimport { useParams } from \"react-router-dom\";\nimport {\n  usePartnerDetails,\n  useSalesForceData,\n  useSalesForceDataWithThreeQueries,\n  useSalesForceDataWithTwoQueries,\n} from \"../../../getSalesForceData\";\nimport { fetchDataFromSalesForce } from \"../../../salesforceAuth\";\n\ninterface PartnersDataType {\n  key: string;\n  partnerName: string;\n  clientKey?: string;\n  overview: string;\n  hasRequested: boolean;\n  website?: string;\n  richMerge?: string;\n  surveyOptionName?: string[];\n  Stage_M__c?: string;\n  Stage_MP__c?: string;\n  Sweepstakes_Type__c?: string;\n  Client_Campaign_ID__c?: string;\n  Interest_in_Partner__c?: string;\n  RecordTypeId?: string;\n  Client_Campaign__c?: string;\n  Meeting_Source__c?: string;\n  Intro_Type__c?: string;\n  Request_Submitted_Date_M__c?: string;\n  Related_Membership__c: string;\n  Related_Membership_Member__c: string;\n  Survey_Option_Name__c: string[];\n  filterCategory?: string[];\n  Client_Logo__c?: string;\n  Client_Decline_Reason__c?: string;\n}\n\ninterface SalesForcePartner {\n  Id: string;\n  Client_Id__c?: string;\n  Account_ID__c?: string;\n  Client_Name__c: string;\n  Account_Name_Merge_Only__c: string;\n  Quick_Overview__c: string;\n  Client_Website__c?: string;\n  Website?: string;\n  Rich_Merge__c?: string;\n  Stage_M__c?: string;\n  Stage_MP__c?: string;\n  Sweepstakes_Type__c?: string;\n  Client_Campaign_ID__c?: string;\n  Interest_in_Partner__c?: string;\n  RecordTypeId?: string;\n  Client_Campaign__c?: string;\n  Meeting_Source__c?: string;\n  Intro_Type__c?: string;\n  Request_Submitted_Date_M__c?: string;\n  Related_Membership__c: string;\n  Related_Membership_Member__c: string;\n  Survey_Option_Name__c: string[];\n  Client_Logo__c?: string;\n}\n\nconst QUERY1 = (clientId: string | undefined) =>\n  `query/?q=SELECT+Id,Client_Id__c,Client_Name__c,Related_Membership_Member__c,Quick_Overview__c,Client_Website__c,Client_Logo__c,Stage_M__c,Stage_MP__c,Sweepstakes_Type__c+FROM+Meeting__c+WHERE+Stage_M__c='Request+Queued'+AND+MemberC__c='${clientId}'`;\nconst QUERY2 = `query/?q=SELECT+Id,Account_ID__c,Related_Membership__c,Account_Name_Merge_Only__c,Website,Client_Logo__c,Quick_Overview__c,Client_Campaign_ID__c+FROM+Account+WHERE+RecordTypeId='01236000000OodE'+AND+(Client_Campaign_Status__c='Active'+OR+Client_Campaign_Status__c='Testing')`;\nconst QUERY3 = (recordIds: string[]) =>\n  `query/?q=SELECT+Client_Name__c,Survey_Option_Name__c+FROM+Survey__c+WHERE+Client_Name__c+IN+(${recordIds\n    .map((id) => `'${id}'`)\n    .join(\",\")})`;\nconst transformer = (primaryData: SalesForcePartner, relatedData?: any) => {\n  const surveyOptions = Array.isArray(relatedData?.Survey_Option_Name__c)\n    ? relatedData.Survey_Option_Name__c\n    : Array.isArray(relatedData?.Survey_Option_Name__c)\n    ? [relatedData.Survey_Option_Name__c]\n    : [];\n\n  return {\n    key: primaryData.Id,\n    clientKey: primaryData.Client_Id__c || primaryData.Account_ID__c,\n    website: primaryData.Client_Website__c || primaryData.Website,\n    partnerName:\n      primaryData.Client_Name__c || primaryData.Account_Name_Merge_Only__c,\n    overview: primaryData.Quick_Overview__c || \"No quick overview\",\n    hasRequested: primaryData.Stage_M__c === \"Request Queued\",\n    richMerge: primaryData.Rich_Merge__c,\n    Survey_Option_Name__c: surveyOptions,\n    Stage_M__c: primaryData.Stage_M__c || \"\",\n    Stage_MP__c: primaryData.Stage_MP__c || \"\",\n    Sweepstakes_Type__c: primaryData.Sweepstakes_Type__c || \"\",\n    Client_Campaign_ID__c: primaryData.Client_Campaign_ID__c,\n    Related_Membership__c: primaryData.Related_Membership__c,\n    Related_Membership_Member__c: primaryData.Related_Membership_Member__c,\n    Client_Logo__c: primaryData.Client_Logo__c,\n  };\n};\ntype MeetingRecord = {\n  Client_Id__c: string;\n};\ntype Transformer<T, U> = (input: T) => U;\nconst QUERY_REQUESTED_MEETINGS = (clientId: string | undefined) =>\n  `query/?q=SELECT+Client_Id__c+FROM+Meeting__c+WHERE+Stage_M__c!='Request Queued'+AND+MemberC__c='${clientId}'`;\n\nconst clientIDTransformer: Transformer<MeetingRecord, string> = (\n  record: MeetingRecord\n) => record.Client_Id__c;\n\nconst PartnersSection: FC = () => {\n  const [filteredInfo, setFilteredInfo] = useState<\n    Record<string, FilterValue | null>\n  >({});\n  const [sortedInfo, setSortedInfo] = useState<SorterResult<PartnersDataType>>(\n    {}\n  );\n  const [open, setOpen] = useState(false);\n  const [selectedPartner, setSelectedPartner] =\n    useState<PartnersDataType | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [viewOnlyRequested, setViewOnlyRequested] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [searchValue, setSearchValue] = useState<string>(\"\");\n  const [loadingPartnerDetails, setLoadingPartnerDetails] = useState(false);\n  const [appliedViewOnlyRequested, setAppliedViewOnlyRequested] =\n    useState(true);\n  const [selectedCategories, setSelectedCategories] = useState<string[]>([]);\n  const {\n    requestedList,\n    declinedList,\n    acceptedList,\n    savedAcceptedList,\n    setSavedAcceptedList,\n  } = usePartnerContext();\n  const { incentiveFromSalesForce } = useGetPartnersAndIncentivesContext();\n  const { clientId } = useParams<{ clientId: string }>();\n\n  const { data: partnersFromSalesForce, fetchData } =\n    useSalesForceDataWithThreeQueries(\n      QUERY1(clientId),\n      QUERY2,\n      QUERY3,\n      transformer\n    );\n\n  const requestedClientIDs = useSalesForceData(\n    QUERY_REQUESTED_MEETINGS(clientId),\n    clientIDTransformer\n  );\n\n  useEffect(() => {\n    if (partnersFromSalesForce && partnersFromSalesForce.length > 0) {\n      const filteredPartners = partnersFromSalesForce.filter(\n        (partner, index, self) => {\n          return (\n            self.findIndex((p) => p.clientKey === partner.clientKey) === index\n          );\n        }\n      );\n      setSavedAcceptedList(filteredPartners);\n    }\n  }, [partnersFromSalesForce]);\n\n  const showModal = () => {\n    setIsModalOpen(true);\n  };\n\n  const handleOk = () => {\n    setIsModalOpen(false);\n  };\n\n  const handleCancel = () => {\n    setIsModalOpen(false);\n  };\n\n  const showDrawer = async (partner: PartnersDataType) => {\n    setSelectedPartner(partner);\n    setLoadingPartnerDetails(true);\n    try {\n      const response = await fetchDataFromSalesForce(\n        `query/?q=SELECT+Rich_Merge__c+FROM+Client_Pitch__c+WHERE+Active__c=true+AND+Custom_Outreach__c=true+AND+(Client_Id__c='${partner.clientKey}'+OR+Client_Id__c='${partner.key}')`\n      );\n      if (\n        response &&\n        response.records &&\n        response.records[0] &&\n        response.records[0].Rich_Merge__c\n      ) {\n        setSelectedPartner((prev) => ({\n          ...prev!,\n          richMerge: response.records[0].Rich_Merge__c,\n        }));\n      } else {\n        console.error(\"Invalid data format:\", response);\n      }\n    } catch (error) {\n      console.error(\"Error fetching partner details:\", error);\n    } finally {\n      setLoadingPartnerDetails(false);\n    }\n\n    setOpen(true);\n  };\n\n  const onCloseDrawer = () => {\n    setSelectedPartner(null);\n    setOpen(false);\n    setTimeout(() => {\n      fetchData();\n    }, 5000);\n  };\n\n  const handleChangePage = (page: number) => {\n    setCurrentPage(page);\n  };\n\n  const getPartnerStatus = (partner: PartnersDataType) => {\n    if (acceptedList.some((item) => item.key === partner.key)) {\n      return \"accepted\";\n    } else if (requestedList.some((item) => item.key === partner.key)) {\n      return \"requested\";\n    } else if (declinedList.some((item) => item.key === partner.key)) {\n      return \"declined\";\n    }\n    return \"\";\n  };\n\n  const handleChange: TableProps<PartnersDataType>[\"onChange\"] = (\n    pagination,\n    filters,\n    sorter\n  ) => {\n    console.log(\"Various parameters\", pagination, filters, sorter);\n    setFilteredInfo(filters);\n    setSortedInfo(sorter as SorterResult<PartnersDataType>);\n  };\n\n  const handleViewOnlyRequestedChange = (checked: boolean) => {\n    setCurrentPage(1);\n    setViewOnlyRequested(checked);\n  };\n\n  const handleApply = (\n    value: string,\n    viewOnlyRequested: boolean,\n    selectedCategories: string[]\n  ) => {\n    setSearchValue(value);\n    setAppliedViewOnlyRequested(viewOnlyRequested);\n    setSelectedCategories(selectedCategories);\n    handleOk();\n  };\n\n  const filteredData = useMemo(() => {\n    let filtered = [...savedAcceptedList]; // Клонировать массив, чтобы избежать мутации\n\n    if (searchValue) {\n      filtered = filtered.filter(\n        (partner) =>\n          partner.partnerName\n            .toLowerCase()\n            .includes(searchValue.toLowerCase()) ||\n          partner.overview.toLowerCase().includes(searchValue.toLowerCase())\n      );\n    }\n\n    if (selectedCategories.length) {\n      filtered = filtered\n        .map((partner) => {\n          const matchingCategories = selectedCategories.filter((category) =>\n            partner.Survey_Option_Name__c?.some((option) => option === category)\n          );\n\n          if (matchingCategories.length) {\n            return {\n              ...partner,\n              filterCategory: matchingCategories,\n            };\n          }\n          return partner;\n        })\n        .filter(\n          (partner) => partner.filterCategory && partner.filterCategory.length\n        );\n    }\n\n    if (requestedClientIDs && requestedClientIDs.length > 0) {\n      filtered = filtered.filter(\n        (partner) =>\n          partner.clientKey && !requestedClientIDs.includes(partner.clientKey)\n      );\n    }\n\n    if (appliedViewOnlyRequested) {\n      filtered = filtered.filter((item) => item.hasRequested);\n    }\n\n    return filtered;\n  }, [\n    savedAcceptedList,\n    searchValue,\n    appliedViewOnlyRequested,\n    selectedCategories,\n    requestedClientIDs,\n  ]);\n\n  const sortedData = useMemo(() => {\n    if (sortedInfo && sortedInfo.columnKey === \"name\") {\n      if (sortedInfo.order === \"ascend\") {\n        return [...filteredData].sort((a, b) =>\n          a.partnerName.localeCompare(b.partnerName)\n        );\n      } else if (sortedInfo.order === \"descend\") {\n        return [...filteredData].sort((a, b) =>\n          b.partnerName.localeCompare(a.partnerName)\n        );\n      }\n    }\n    return filteredData; // Если sortedInfo.order не 'ascend' или 'descend', возвращаем исходные данные\n  }, [filteredData, sortedInfo]);\n\n  const startIndex = (currentPage - 1) * 10;\n  const endIndex = startIndex + 10;\n  const paginatedData = sortedData\n    ? sortedData.slice(startIndex, endIndex)\n    : [];\n\n  const columns: ColumnsType<PartnersDataType> = [\n    {\n      title: \"NAME\",\n      dataIndex: \"partnerName\",\n      key: \"name\",\n      filteredValue: filteredInfo.partnerName || null,\n      onFilter: (value, record) =>\n        record.partnerName.includes(value.toString()),\n      sorter: (a, b) => a.partnerName.localeCompare(b.partnerName),\n      sortOrder: sortedInfo.columnKey === \"name\" ? sortedInfo.order : null,\n      render: (text, record) => {\n        const displayText =\n          record.hasRequested && record.partnerName\n            ? record.partnerName.slice(0)\n            : text;\n        const partnerStatus = getPartnerStatus(record);\n\n        return (\n          <div className={styles.partnersNameContainer}>\n            <span className={styles.partnersName}>\n              {partnerStatus === \"requested\" ? (\n                <ProgressIcon className={styles.statusIcon} />\n              ) : partnerStatus === \"accepted\" ? (\n                <AcceptIcon className={styles.statusIcon} />\n              ) : partnerStatus === \"declined\" ? (\n                <DeclineIcon className={styles.statusIcon} />\n              ) : (\n                <DefaultIcon className={styles.statusIcon} />\n              )}\n              {displayText}\n            </span>\n            {record.hasRequested && (\n              <span className={styles.orangeStar}> ★</span>\n            )}\n          </div>\n        );\n      },\n    },\n    {\n      title: \"Quick Overview\",\n      dataIndex: \"overview\",\n      key: \"overview\",\n      width: \"65%\",\n      render: (text, record) => {\n        const partnerStatus = getPartnerStatus(record);\n        return <span>{text}</span>;\n      },\n    },\n  ];\n\n  return (\n    <section className={styles.partnersContainer}>\n      <PartnerModal\n        isModalOpen={isModalOpen}\n        onShowModal={showModal}\n        onOk={handleOk}\n        OnCancel={handleCancel}\n        onViewOnlyRequestedChange={handleViewOnlyRequestedChange}\n        onApply={handleApply}\n      />\n      <div className={styles.partnersTitleContainer}>\n        <div className={styles.partnersTitle}>\n          <h2>Partners</h2>\n          <small>Click a partner name below for more information</small>\n        </div>\n        <button onClick={showModal} className={styles.filterBtn}>\n          {\" \"}\n          <Filter /> Filter\n        </button>\n      </div>\n      <Space style={{ marginBottom: 16 }}></Space>\n      <Table\n        onRow={(record) => ({\n          onClick: () => showDrawer(record),\n        })}\n        columns={columns}\n        pagination={false}\n        dataSource={paginatedData}\n        onChange={handleChange}\n        className={styles.table}\n      />\n      <Pagination\n        showSizeChanger={false}\n        defaultPageSize={10}\n        className={styles.paginationPartners}\n        defaultCurrent={currentPage}\n        total={filteredData.length}\n        onChange={handleChangePage}\n      />\n      <small className={styles.requested}>\n        Partners who have requested to meet with you.\n      </small>\n      <PartnerDrawer\n        isOpen={open}\n        onClose={onCloseDrawer}\n        partnerDetails={selectedPartner}\n      />\n    </section>\n  );\n};\n\nexport default PartnersSection;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}